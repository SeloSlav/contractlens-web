{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/WebProjects/contractlens-web/apps/web/lib/mongodb.ts"],"sourcesContent":["import { MongoClient, Db } from \"mongodb\";\n\nconst uri = process.env.MONGODB_URI ?? \"mongodb://localhost:27017/contractlens\";\n\nlet client: MongoClient | null = null;\nlet clientPromise: Promise<MongoClient> | null = null;\n\nfunction getClient(): Promise<MongoClient> {\n  if (clientPromise) return clientPromise;\n  clientPromise = new MongoClient(uri).connect();\n  return clientPromise;\n}\n\nexport async function getDb(): Promise<Db> {\n  const c = await getClient();\n  return c.db();\n}\n\nexport async function ensureIndexes(): Promise<void> {\n  const db = await getDb();\n  await db.collection(\"documents\").createIndex({ createdAt: -1 });\n  await db.collection(\"chunks\").createIndex({ docId: 1 });\n  await db.collection(\"runs\").createIndex({ docId: 1 });\n  await db.collection(\"feedback\").createIndex({ runId: 1 });\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAEA,MAAM,MAAM,QAAQ,GAAG,CAAC,WAAW,IAAI;AAEvC,IAAI,SAA6B;AACjC,IAAI,gBAA6C;AAEjD,SAAS;IACP,IAAI,eAAe,OAAO;IAC1B,gBAAgB,IAAI,YAAY,KAAK,OAAO;IAC5C,OAAO;AACT;AAEO,eAAe;IACpB,MAAM,IAAI,MAAM;IAChB,OAAO,EAAE,EAAE;AACb;AAEO,eAAe;IACpB,MAAM,KAAK,MAAM;IACjB,MAAM,GAAG,UAAU,CAAC,aAAa,WAAW,CAAC;QAAE,WAAW,CAAC;IAAE;IAC7D,MAAM,GAAG,UAAU,CAAC,UAAU,WAAW,CAAC;QAAE,OAAO;IAAE;IACrD,MAAM,GAAG,UAAU,CAAC,QAAQ,WAAW,CAAC;QAAE,OAAO;IAAE;IACnD,MAAM,GAAG,UAAU,CAAC,YAAY,WAAW,CAAC;QAAE,OAAO;IAAE;AACzD"}}]
}