{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/WebProjects/contractlens-web/apps/web/lib/mongodb.ts"],"sourcesContent":["import { MongoClient, Db } from \"mongodb\";\n\nconst uri = process.env.MONGODB_URI ?? \"mongodb://localhost:27017/contractlens\";\n\nlet client: MongoClient | null = null;\nlet clientPromise: Promise<MongoClient> | null = null;\n\nfunction getClient(): Promise<MongoClient> {\n  if (clientPromise) return clientPromise;\n  clientPromise = new MongoClient(uri).connect();\n  return clientPromise;\n}\n\nexport async function getDb(): Promise<Db> {\n  const c = await getClient();\n  return c.db();\n}\n\nexport async function ensureIndexes(): Promise<void> {\n  const db = await getDb();\n  await db.collection(\"documents\").createIndex({ createdAt: -1 });\n  await db.collection(\"chunks\").createIndex({ docId: 1 });\n  await db.collection(\"runs\").createIndex({ docId: 1 });\n  await db.collection(\"feedback\").createIndex({ runId: 1 });\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM,MAAM,QAAQ,GAAG,CAAC,WAAW,IAAI;AAEvC,IAAI,SAA6B;AACjC,IAAI,gBAA6C;AAEjD,SAAS;IACP,IAAI,eAAe,OAAO;IAC1B,gBAAgB,IAAI,oKAAW,CAAC,KAAK,OAAO;IAC5C,OAAO;AACT;AAEO,eAAe;IACpB,MAAM,IAAI,MAAM;IAChB,OAAO,EAAE,EAAE;AACb;AAEO,eAAe;IACpB,MAAM,KAAK,MAAM;IACjB,MAAM,GAAG,UAAU,CAAC,aAAa,WAAW,CAAC;QAAE,WAAW,CAAC;IAAE;IAC7D,MAAM,GAAG,UAAU,CAAC,UAAU,WAAW,CAAC;QAAE,OAAO;IAAE;IACrD,MAAM,GAAG,UAAU,CAAC,QAAQ,WAAW,CAAC;QAAE,OAAO;IAAE;IACnD,MAAM,GAAG,UAAU,CAAC,YAAY,WAAW,CAAC;QAAE,OAAO;IAAE;AACzD"}},
    {"offset": {"line": 85, "column": 0}, "map": {"version":3,"sources":["file:///C:/WebProjects/contractlens-web/apps/web/app/api/runs/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\nimport { getDb } from \"@/lib/mongodb\";\n\nexport async function GET(request: NextRequest) {\n  const docId = request.nextUrl.searchParams.get(\"docId\");\n  if (!docId) {\n    return NextResponse.json({ error: \"docId required\" }, { status: 400 });\n  }\n\n  try {\n    const db = await getDb();\n    const runs = await db\n      .collection(\"runs\")\n      .find({ docId })\n      .sort({ createdAt: -1 })\n      .limit(50)\n      .toArray();\n\n    const result = runs.map((r) => ({\n      _id: r._id.toString(),\n      docId: r.docId,\n      type: r.type,\n      createdAt: r.createdAt,\n      status: r.status,\n      durationMs: r.durationMs,\n      outputs: r.outputs,\n    }));\n\n    return NextResponse.json({ runs: result });\n  } catch (err) {\n    console.error(\"GET /api/runs error:\", err);\n    return NextResponse.json(\n      { error: \"Internal server error\" },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,IAAI,OAAoB;IAC5C,MAAM,QAAQ,QAAQ,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC;IAC/C,IAAI,CAAC,OAAO;QACV,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAiB,GAAG;YAAE,QAAQ;QAAI;IACtE;IAEA,IAAI;QACF,MAAM,KAAK,MAAM,IAAA,wIAAK;QACtB,MAAM,OAAO,MAAM,GAChB,UAAU,CAAC,QACX,IAAI,CAAC;YAAE;QAAM,GACb,IAAI,CAAC;YAAE,WAAW,CAAC;QAAE,GACrB,KAAK,CAAC,IACN,OAAO;QAEV,MAAM,SAAS,KAAK,GAAG,CAAC,CAAC,IAAM,CAAC;gBAC9B,KAAK,EAAE,GAAG,CAAC,QAAQ;gBACnB,OAAO,EAAE,KAAK;gBACd,MAAM,EAAE,IAAI;gBACZ,WAAW,EAAE,SAAS;gBACtB,QAAQ,EAAE,MAAM;gBAChB,YAAY,EAAE,UAAU;gBACxB,SAAS,EAAE,OAAO;YACpB,CAAC;QAED,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,MAAM;QAAO;IAC1C,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,wBAAwB;QACtC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAwB,GACjC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}