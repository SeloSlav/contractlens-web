module.exports=[15189,72783,e=>{"use strict";var t=e.i(39866);let r=(e,t,r)=>{let i,a,n,o=!1,s=async()=>{a||(a=e());try{i=await a,n=!0,o=!1}finally{a=void 0}return i};return void 0===t?async e=>((!n||e?.forceRefresh)&&(i=await s()),i):async e=>((!n||e?.forceRefresh)&&(i=await s()),o||(r&&!r(i)?o=!0:t(i)&&await s()),i)};e.s(["memoize",0,r],72783);var i=e.i(60400);function a(e){try{let t=new Set(Array.from(e.match(/([A-Z_]){3,}/g)??[]));return t.delete("CONFIG"),t.delete("CONFIG_PREFIX_SEPARATOR"),t.delete("ENV"),[...t].join(", ")}catch(t){return e}}var n=e.i(81355),o=e.i(46277);e.s(["loadConfig",0,({environmentVariableSelector:e,configFileSelector:s,default:l},c={})=>{let d,{signingName:f,logger:p}=c;return r((0,t.chain)((d={signingName:f,logger:p},async()=>{try{let t=e(process.env,d);if(void 0===t)throw Error();return t}catch(t){throw new i.CredentialsProviderError(t.message||`Not found in ENV: ${a(e.toString())}`,{logger:d?.logger})}}),((e,{preferredFile:t="config",...r}={})=>async()=>{let s=(0,n.getProfileName)(r),{configFile:l,credentialsFile:c}=await (0,o.loadSharedConfigFiles)(r),d=c[s]||{},f=l[s]||{},p="config"===t?{...d,...f}:{...f,...d};try{let r="config"===t?l:c,i=e(p,r);if(void 0===i)throw Error();return i}catch(t){throw new i.CredentialsProviderError(t.message||`Not found in config files w/ profile [${s}]: ${a(e.toString())}`,{logger:r.logger})}})(s,c),(e=>"function"==typeof e?async()=>await e():()=>Promise.resolve(e))(l)))}],15189)},41175,e=>{"use strict";let t=e=>{let r;if("string"==typeof e)return t(new URL(e));let{hostname:i,pathname:a,port:n,protocol:o,search:s}=e;return s&&(r=function(e){let t={};if(e=e.replace(/^\?/,""))for(let r of e.split("&")){let[e,i=null]=r.split("=");e=decodeURIComponent(e),i&&(i=decodeURIComponent(i)),e in t?Array.isArray(t[e])?t[e].push(i):t[e]=[t[e],i]:t[e]=i}return t}(s)),{hostname:i,port:n?parseInt(n):void 0,protocol:o,path:a,query:r}};e.s(["parseUrl",0,t],41175)},874,(e,t,r)=>{t.exports=e.x("buffer",()=>require("buffer"))},14747,(e,t,r)=>{t.exports=e.x("path",()=>require("path"))},60400,48979,e=>{"use strict";class t extends Error{name="ProviderError";tryNextLink;constructor(e,r=!0){let i,a=!0;"boolean"==typeof r?(i=void 0,a=r):null!=r&&"object"==typeof r&&(i=r.logger,a=r.tryNextLink??!0),super(e),this.tryNextLink=a,Object.setPrototypeOf(this,t.prototype),i?.debug?.(`@smithy/property-provider ${a?"->":"(!)"} ${e}`)}static from(e,t=!0){return Object.assign(new this(e.message,t),e)}}e.s(["ProviderError",()=>t],48979);class r extends t{name="CredentialsProviderError";constructor(e,t=!0){super(e,t),Object.setPrototypeOf(this,r.prototype)}}e.s(["CredentialsProviderError",()=>r],60400)},46786,(e,t,r)=>{t.exports=e.x("os",()=>require("os"))},12714,(e,t,r)=>{t.exports=e.x("node:fs/promises",()=>require("node:fs/promises"))},65790,49487,e=>{"use strict";var t=e.i(46786),r=e.i(14747);let i={};e.s(["getHomeDir",0,()=>{let{HOME:e,USERPROFILE:a,HOMEPATH:n,HOMEDRIVE:o=`C:${r.sep}`}=process.env;if(e)return e;if(a)return a;if(n)return`${o}${n}`;let s=process&&process.geteuid?`${process.geteuid()}`:"DEFAULT";return i[s]||(i[s]=(0,t.homedir)()),i[s]}],65790);var a=e.i(12714);let n={},o={};e.s(["fileIntercept",0,o,"readFile",0,(e,t)=>void 0!==o[e]?o[e]:((!n[e]||t?.ignoreCache)&&(n[e]=(0,a.readFile)(e,"utf8")),n[e])],49487)},81355,e=>{"use strict";let t="AWS_PROFILE";e.s(["ENV_PROFILE",0,t,"getProfileName",0,e=>e.profile||process.env[t]||"default"])},96405,3289,e=>{"use strict";var t,r;(r=t||(t={})).PROFILE="profile",r.SSO_SESSION="sso-session",r.SERVICES="services",e.s(["IniSectionType",()=>t],96405),e.s(["CONFIG_PREFIX_SEPARATOR",0,"."],3289)},21334,e=>{"use strict";var t=e.i(96405),r=e.i(3289);e.s(["getConfigData",0,e=>Object.entries(e).filter(([e])=>{let i=e.indexOf(r.CONFIG_PREFIX_SEPARATOR);return -1!==i&&Object.values(t.IniSectionType).includes(e.substring(0,i))}).reduce((e,[i,a])=>{let n=i.indexOf(r.CONFIG_PREFIX_SEPARATOR);return e[i.substring(0,n)===t.IniSectionType.PROFILE?i.substring(n+1):i]=a,e},{...e.default&&{default:e.default}})])},92395,e=>{"use strict";var t=e.i(14747),r=e.i(65790);e.s(["getConfigFilepath",0,()=>process.env.AWS_CONFIG_FILE||(0,t.join)((0,r.getHomeDir)(),".aws","config")])},61487,e=>{"use strict";var t=e.i(14747),r=e.i(65790);e.s(["getCredentialsFilepath",0,()=>process.env.AWS_SHARED_CREDENTIALS_FILE||(0,t.join)((0,r.getHomeDir)(),".aws","credentials")])},7104,e=>{"use strict";var t=e.i(96405),r=e.i(3289);let i=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,a=["__proto__","profile __proto__"];e.s(["parseIni",0,e=>{let n,o,s={};for(let l of e.split(/\r?\n/)){let e=l.split(/(^|\s)[;#]/)[0].trim();if("["===e[0]&&"]"===e[e.length-1]){n=void 0,o=void 0;let s=e.substring(1,e.length-1),l=i.exec(s);if(l){let[,e,,i]=l;Object.values(t.IniSectionType).includes(e)&&(n=[e,i].join(r.CONFIG_PREFIX_SEPARATOR))}else n=s;if(a.includes(s))throw Error(`Found invalid profile name "${s}"`)}else if(n){let t=e.indexOf("=");if(![0,-1].includes(t)){let[i,a]=[e.substring(0,t).trim(),e.substring(t+1).trim()];if(""===a)o=i;else{o&&l.trimStart()===l&&(o=void 0),s[n]=s[n]||{};let e=o?[o,i].join(r.CONFIG_PREFIX_SEPARATOR):i;s[n][e]=a}}}}return s}])},46277,e=>{"use strict";var t=e.i(14747),r=e.i(21334),i=e.i(92395),a=e.i(61487),n=e.i(65790),o=e.i(7104),s=e.i(49487);let l=()=>({}),c=async(e={})=>{let{filepath:c=(0,a.getCredentialsFilepath)(),configFilepath:d=(0,i.getConfigFilepath)()}=e,f=(0,n.getHomeDir)(),p=c;c.startsWith("~/")&&(p=(0,t.join)(f,c.slice(2)));let u=d;d.startsWith("~/")&&(u=(0,t.join)(f,d.slice(2)));let E=await Promise.all([(0,s.readFile)(u,{ignoreCache:e.ignoreCache}).then(o.parseIni).then(r.getConfigData).catch(l),(0,s.readFile)(p,{ignoreCache:e.ignoreCache}).then(o.parseIni).catch(l)]);return{configFile:E[0],credentialsFile:E[1]}};e.s(["loadSharedConfigFiles",0,c])},39866,e=>{"use strict";var t=e.i(48979);e.s(["chain",0,(...e)=>async()=>{let r;if(0===e.length)throw new t.ProviderError("No providers in chain");for(let t of e)try{return await t()}catch(e){if(r=e,e?.tryNextLink)continue;throw e}throw r}])},74340,14706,20695,51792,39734,82842,e=>{"use strict";var t,r,i,a,n=e.i(60400),o=e.i(92509),s=e.i(48979),l=e.i(874),c=e.i(21517);function d(e){return new Promise((t,r)=>{let i=(0,c.request)({method:"GET",...e,hostname:e.hostname?.replace(/^\[(.+)\]$/,"$1")});i.on("error",e=>{r(Object.assign(new s.ProviderError("Unable to connect to instance metadata service"),e)),i.destroy()}),i.on("timeout",()=>{r(new s.ProviderError("TimeoutError from instance metadata service")),i.destroy()}),i.on("response",e=>{let{statusCode:a=400}=e;(a<200||300<=a)&&(r(Object.assign(new s.ProviderError("Error response received from instance metadata service"),{statusCode:a})),i.destroy());let n=[];e.on("data",e=>{n.push(e)}),e.on("end",()=>{t(l.Buffer.concat(n)),i.destroy()})}),i.end()})}e.s(["httpRequest",()=>d],14706);let f=e=>!!e&&"object"==typeof e&&"string"==typeof e.AccessKeyId&&"string"==typeof e.SecretAccessKey&&"string"==typeof e.Token&&"string"==typeof e.Expiration,p=e=>({accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration),...e.AccountId&&{accountId:e.AccountId}}),u=1e3,E=0,g=({maxRetries:e=E,timeout:t=u})=>({maxRetries:e,timeout:t});e.s(["DEFAULT_MAX_RETRIES",0,E,"DEFAULT_TIMEOUT",0,u,"providerConfigFromInit",0,g],20695);let v=(e,t)=>{let r=e();for(let i=0;i<t;i++)r=r.catch(e);return r},h="AWS_CONTAINER_CREDENTIALS_FULL_URI",_="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",I="AWS_CONTAINER_AUTHORIZATION_TOKEN",m=async(e,t)=>(process.env[I]&&(t.headers={...t.headers,Authorization:process.env[I]}),(await d({...t,timeout:e})).toString()),w={localhost:!0,"127.0.0.1":!0},y={"http:":!0,"https:":!0},A=async({logger:e})=>{if(process.env[_])return{hostname:"169.254.170.2",path:process.env[_]};if(process.env[h]){let t=(0,o.parse)(process.env[h]);if(!t.hostname||!(t.hostname in w))throw new n.CredentialsProviderError(`${t.hostname} is not a valid container metadata service hostname`,{tryNextLink:!1,logger:e});if(!t.protocol||!(t.protocol in y))throw new n.CredentialsProviderError(`${t.protocol} is not a valid container metadata service protocol`,{tryNextLink:!1,logger:e});return{...t,port:t.port?parseInt(t.port,10):void 0}}throw new n.CredentialsProviderError(`The container metadata credential provider cannot be used unless the ${_} or ${h} environment variable is set`,{tryNextLink:!1,logger:e})};e.s(["ENV_CMDS_AUTH_TOKEN",0,I,"ENV_CMDS_FULL_URI",0,h,"ENV_CMDS_RELATIVE_URI",0,_,"fromContainerMetadata",0,(e={})=>{let{timeout:t,maxRetries:r}=g(e);return()=>v(async()=>{let r=await A({logger:e.logger}),i=JSON.parse(await m(t,r));if(!f(i))throw new n.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:e.logger});return p(i)},r)}],74340);var C=e.i(15189),S=n;class T extends S.CredentialsProviderError{tryNextLink;name="InstanceMetadataV1FallbackError";constructor(e,t=!0){super(e,t),this.tryNextLink=t,Object.setPrototypeOf(this,T.prototype)}}var R=e.i(41175);(t=i||(i={})).IPv4="http://169.254.169.254",t.IPv6="http://[fd00:ec2::254]",e.s(["Endpoint",()=>i],51792);let N={environmentVariableSelector:e=>e.AWS_EC2_METADATA_SERVICE_ENDPOINT,configFileSelector:e=>e.ec2_metadata_service_endpoint,default:void 0};(r=a||(a={})).IPv4="IPv4",r.IPv6="IPv6";let P={environmentVariableSelector:e=>e.AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE,configFileSelector:e=>e.ec2_metadata_service_endpoint_mode,default:a.IPv4},O=async()=>(0,R.parseUrl)(await F()||await b()),F=async()=>(0,C.loadConfig)(N)(),b=async()=>{let e=await (0,C.loadConfig)(P)();switch(e){case a.IPv4:return i.IPv4;case a.IPv6:return i.IPv6;default:throw Error(`Unsupported endpoint mode: ${e}. Select from ${Object.values(a)}`)}};e.s(["getInstanceMetadataEndpoint",0,O],39734);let D=(e,t)=>{let r=300+Math.floor(300*Math.random()),i=new Date(Date.now()+1e3*r);t.warn(`Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(i)}.
For more information, please visit: https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html`);let a=e.originalExpiration??e.expiration;return{...e,...a?{originalExpiration:a}:{},expiration:i}},L="/latest/meta-data/iam/security-credentials/",x="AWS_EC2_METADATA_V1_DISABLED",M="ec2_metadata_v1_disabled",U="x-aws-ec2-metadata-token",V=async e=>d({...e,path:"/latest/api/token",method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),k=async e=>(await d({...e,path:L})).toString(),$=async(e,t,r)=>{let i=JSON.parse((await d({...t,path:L+e})).toString());if(!f(i))throw new n.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:r.logger});return p(i)};e.s(["fromInstanceMetadata",0,(e={})=>((e,t={})=>{let r,i=t?.logger||console;return async()=>{let t;try{(t=await e()).expiration&&t.expiration.getTime()<Date.now()&&(t=D(t,i))}catch(e){if(r)i.warn("Credential renew failed: ",e),t=D(r,i);else throw e}return r=t,t}})(((e={})=>{let t=!1,{logger:r,profile:i}=e,{timeout:a,maxRetries:o}=g(e),s=async(r,a)=>{if(t||a.headers?.[U]==null){let t=!1,r=!1,a=await (0,C.loadConfig)({environmentVariableSelector:t=>{let i=t[x];if(r=!!i&&"false"!==i,void 0===i)throw new n.CredentialsProviderError(`${x} not set in env, checking config file next.`,{logger:e.logger});return r},configFileSelector:e=>{let r=e[M];return t=!!r&&"false"!==r},default:!1},{profile:i})();if(e.ec2MetadataV1Disabled||a){let i=[];throw e.ec2MetadataV1Disabled&&i.push("credential provider initialization (runtime option ec2MetadataV1Disabled)"),t&&i.push(`config file profile (${M})`),r&&i.push(`process environment variable (${x})`),new T(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${i.join(", ")}].`)}}let o=(await v(async()=>{let e;try{e=await k(a)}catch(e){throw 401===e.statusCode&&(t=!1),e}return e},r)).trim();return v(async()=>{let r;try{r=await $(o,a,e)}catch(e){throw 401===e.statusCode&&(t=!1),e}return r},r)};return async()=>{let e=await O();if(t)return r?.debug("AWS SDK Instance Metadata","using v1 fallback (no token fetch)"),s(o,{...e,timeout:a});{let i;try{i=(await V({...e,timeout:a})).toString()}catch(i){if(i?.statusCode===400)throw Object.assign(i,{message:"EC2 Metadata token request returned error"});return("TimeoutError"===i.message||[403,404,405].includes(i.statusCode))&&(t=!0),r?.debug("AWS SDK Instance Metadata","using v1 fallback (initial)"),s(o,{...e,timeout:a})}return s(o,{...e,headers:{[U]:i},timeout:a})}}})(e),{logger:e.logger})],82842)},63152,e=>{"use strict";e.s([],63412),e.i(63412);var t=e.i(74340),r=e.i(82842),i=e.i(20695);e.s([],95710),e.i(95710);var a=e.i(14706),n=e.i(39734),o=e.i(51792);e.s(["DEFAULT_MAX_RETRIES",()=>i.DEFAULT_MAX_RETRIES,"DEFAULT_TIMEOUT",()=>i.DEFAULT_TIMEOUT,"ENV_CMDS_AUTH_TOKEN",()=>t.ENV_CMDS_AUTH_TOKEN,"ENV_CMDS_FULL_URI",()=>t.ENV_CMDS_FULL_URI,"ENV_CMDS_RELATIVE_URI",()=>t.ENV_CMDS_RELATIVE_URI,"Endpoint",()=>o.Endpoint,"fromContainerMetadata",()=>t.fromContainerMetadata,"fromInstanceMetadata",()=>r.fromInstanceMetadata,"getInstanceMetadataEndpoint",()=>n.getInstanceMetadataEndpoint,"httpRequest",()=>a.httpRequest,"providerConfigFromInit",()=>i.providerConfigFromInit],63152)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__bf04eac2._.js.map