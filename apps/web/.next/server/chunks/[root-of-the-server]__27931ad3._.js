module.exports=[54799,(e,r,t)=>{r.exports=e.x("crypto",()=>require("crypto"))},60400,48979,e=>{"use strict";class r extends Error{name="ProviderError";tryNextLink;constructor(e,t=!0){let s,i=!0;"boolean"==typeof t?(s=void 0,i=t):null!=t&&"object"==typeof t&&(s=t.logger,i=t.tryNextLink??!0),super(e),this.tryNextLink=i,Object.setPrototypeOf(this,r.prototype),s?.debug?.(`@smithy/property-provider ${i?"->":"(!)"} ${e}`)}static from(e,r=!0){return Object.assign(new this(e.message,r),e)}}e.s(["ProviderError",()=>r],48979);class t extends r{name="CredentialsProviderError";constructor(e,r=!0){super(e,r),Object.setPrototypeOf(this,t.prototype)}}e.s(["CredentialsProviderError",()=>t],60400)},9212,e=>{"use strict";function r(e,r,t){return e.$source||(e.$source={}),e.$source[r]=t,e}e.s(["setCredentialFeature",()=>r])},14747,(e,r,t)=>{r.exports=e.x("path",()=>require("path"))},46786,(e,r,t)=>{r.exports=e.x("os",()=>require("os"))},12714,(e,r,t)=>{r.exports=e.x("node:fs/promises",()=>require("node:fs/promises"))},65790,49487,e=>{"use strict";var r=e.i(46786),t=e.i(14747);let s={};e.s(["getHomeDir",0,()=>{let{HOME:e,USERPROFILE:i,HOMEPATH:o,HOMEDRIVE:n=`C:${t.sep}`}=process.env;if(e)return e;if(i)return i;if(o)return`${n}${o}`;let l=process&&process.geteuid?`${process.geteuid()}`:"DEFAULT";return s[l]||(s[l]=(0,r.homedir)()),s[l]}],65790);var i=e.i(12714);let o={},n={};e.s(["fileIntercept",0,n,"readFile",0,(e,r)=>void 0!==n[e]?n[e]:((!o[e]||r?.ignoreCache)&&(o[e]=(0,i.readFile)(e,"utf8")),o[e])],49487)},81355,e=>{"use strict";let r="AWS_PROFILE";e.s(["ENV_PROFILE",0,r,"getProfileName",0,e=>e.profile||process.env[r]||"default"])},92395,e=>{"use strict";var r=e.i(14747),t=e.i(65790);e.s(["getConfigFilepath",0,()=>process.env.AWS_CONFIG_FILE||(0,r.join)((0,t.getHomeDir)(),".aws","config")])},96405,3289,e=>{"use strict";var r,t;(t=r||(r={})).PROFILE="profile",t.SSO_SESSION="sso-session",t.SERVICES="services",e.s(["IniSectionType",()=>r],96405),e.s(["CONFIG_PREFIX_SEPARATOR",0,"."],3289)},7104,e=>{"use strict";var r=e.i(96405),t=e.i(3289);let s=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,i=["__proto__","profile __proto__"];e.s(["parseIni",0,e=>{let o,n,l={};for(let a of e.split(/\r?\n/)){let e=a.split(/(^|\s)[;#]/)[0].trim();if("["===e[0]&&"]"===e[e.length-1]){o=void 0,n=void 0;let l=e.substring(1,e.length-1),a=s.exec(l);if(a){let[,e,,s]=a;Object.values(r.IniSectionType).includes(e)&&(o=[e,s].join(t.CONFIG_PREFIX_SEPARATOR))}else o=l;if(i.includes(l))throw Error(`Found invalid profile name "${l}"`)}else if(o){let r=e.indexOf("=");if(![0,-1].includes(r)){let[s,i]=[e.substring(0,r).trim(),e.substring(r+1).trim()];if(""===i)n=s;else{n&&a.trimStart()===a&&(n=void 0),l[o]=l[o]||{};let e=n?[n,s].join(t.CONFIG_PREFIX_SEPARATOR):s;l[o][e]=i}}}}return l}])},21334,e=>{"use strict";var r=e.i(96405),t=e.i(3289);e.s(["getConfigData",0,e=>Object.entries(e).filter(([e])=>{let s=e.indexOf(t.CONFIG_PREFIX_SEPARATOR);return -1!==s&&Object.values(r.IniSectionType).includes(e.substring(0,s))}).reduce((e,[s,i])=>{let o=s.indexOf(t.CONFIG_PREFIX_SEPARATOR);return e[s.substring(0,o)===r.IniSectionType.PROFILE?s.substring(o+1):s]=i,e},{...e.default&&{default:e.default}})])},61487,e=>{"use strict";var r=e.i(14747),t=e.i(65790);e.s(["getCredentialsFilepath",0,()=>process.env.AWS_SHARED_CREDENTIALS_FILE||(0,r.join)((0,t.getHomeDir)(),".aws","credentials")])},46277,e=>{"use strict";var r=e.i(14747),t=e.i(21334),s=e.i(92395),i=e.i(61487),o=e.i(65790),n=e.i(7104),l=e.i(49487);let a=()=>({}),c=async(e={})=>{let{filepath:c=(0,i.getCredentialsFilepath)(),configFilepath:f=(0,s.getConfigFilepath)()}=e,d=(0,o.getHomeDir)(),g=c;c.startsWith("~/")&&(g=(0,r.join)(d,c.slice(2)));let u=f;f.startsWith("~/")&&(u=(0,r.join)(d,f.slice(2)));let p=await Promise.all([(0,l.readFile)(u,{ignoreCache:e.ignoreCache}).then(n.parseIni).then(t.getConfigData).catch(a),(0,l.readFile)(g,{ignoreCache:e.ignoreCache}).then(n.parseIni).catch(a)]);return{configFile:p[0],credentialsFile:p[1]}};e.s(["loadSharedConfigFiles",0,c])},76535,e=>{"use strict";var r=e.i(46277);let t=async e=>{let t=await (0,r.loadSharedConfigFiles)(e);return((...e)=>{let r={};for(let t of e)for(let[e,s]of Object.entries(t))void 0!==r[e]?Object.assign(r[e],s):r[e]=s;return r})(t.configFile,t.credentialsFile)};e.s(["parseKnownFiles",0,t],76535)},22734,(e,r,t)=>{r.exports=e.x("fs",()=>require("fs"))},24868,(e,r,t)=>{r.exports=e.x("fs/promises",()=>require("fs/promises"))},23897,32961,e=>{"use strict";var r=e.i(24868),t=e.i(54799),s=e.i(14747),i=e.i(65790);let o=e=>{let r=(0,t.createHash)("sha1").update(e).digest("hex");return(0,s.join)((0,i.getHomeDir)(),".aws","sso","cache",`${r}.json`)};e.s(["getSSOTokenFilepath",0,o],32961);let n={},l=async e=>{if(n[e])return n[e];let t=o(e);return JSON.parse(await (0,r.readFile)(t,"utf8"))};e.s(["getSSOTokenFromFile",0,l,"tokenIntercept",0,n],23897)},75670,70487,61980,e=>{"use strict";var r=e.i(60400),t=e.i(81355),s=e.i(92395),i=e.i(96405),o=e.i(3289);let n=e=>Object.entries(e).filter(([e])=>e.startsWith(i.IniSectionType.SSO_SESSION+o.CONFIG_PREFIX_SEPARATOR)).reduce((e,[r,t])=>({...e,[r.substring(r.indexOf(o.CONFIG_PREFIX_SEPARATOR)+1)]:t}),{});var l=e.i(7104),a=e.i(49487);let c=()=>({}),f=async(e={})=>(0,a.readFile)(e.configFilepath??(0,s.getConfigFilepath)()).then(l.parseIni).then(n).catch(c);var d=e.i(76535);let g=e=>e&&("string"==typeof e.sso_start_url||"string"==typeof e.sso_account_id||"string"==typeof e.sso_session||"string"==typeof e.sso_region||"string"==typeof e.sso_role_name);e.s(["isSsoProfile",0,g],70487);var u=e.i(9212),p=e.i(48979);class h extends p.ProviderError{name="TokenProviderError";constructor(e,r=!0){super(e,r),Object.setPrototypeOf(this,h.prototype)}}var _=e.i(23897);let S="To refresh this SSO session run 'aws sso login' with the corresponding profile.",w=async(r,t={},s)=>{let{SSOOIDCClient:i}=await e.A(57227),o=e=>t.clientConfig?.[e]??t.parentClientConfig?.[e]??s?.[e];return new i(Object.assign({},t.clientConfig??{},{region:r??t.clientConfig?.region,logger:o("logger"),userAgentAppId:o("userAgentAppId")}))},v=async(r,t,s={},i)=>{let{CreateTokenCommand:o}=await e.A(57227);return(await w(t,s,i)).send(new o({clientId:r.clientId,clientSecret:r.clientSecret,refreshToken:r.refreshToken,grantType:"refresh_token"}))},C=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new h(`Token is expired. ${S}`,!1)},m=(e,r,t=!1)=>{if(void 0===r)throw new h(`Value not present for '${e}' in SSO Token${t?". Cannot refresh":""}. ${S}`,!1)};var O=e.i(32961);let{writeFile:k}=e.i(22734).promises,y=new Date(0),F=async({ssoStartUrl:s,ssoSession:i,ssoAccountId:o,ssoRegion:n,ssoRoleName:l,ssoClient:a,clientConfig:c,parentClientConfig:g,callerClientConfig:p,profile:w,filepath:F,configFilepath:I,ignoreCache:P,logger:E})=>{let x,T,A="To refresh this SSO session run aws sso login with the corresponding profile.";if(i)try{let e=await ((e={})=>async({callerClientConfig:r}={})=>{let s;e.logger?.debug("@aws-sdk/token-providers - fromSso");let i=await (0,d.parseKnownFiles)(e),o=(0,t.getProfileName)({profile:e.profile??r?.profile}),n=i[o];if(n){if(!n.sso_session)throw new h(`Profile '${o}' is missing required property 'sso_session'.`)}else throw new h(`Profile '${o}' could not be found in shared credentials file.`,!1);let l=n.sso_session,a=(await f(e))[l];if(!a)throw new h(`Sso session '${l}' could not be found in shared credentials file.`,!1);for(let e of["sso_start_url","sso_region"])if(!a[e])throw new h(`Sso session '${l}' is missing required property '${e}'.`,!1);a.sso_start_url;let c=a.sso_region;try{s=await (0,_.getSSOTokenFromFile)(l)}catch(e){throw new h(`The SSO session token associated with profile=${o} was not found or is invalid. ${S}`,!1)}m("accessToken",s.accessToken),m("expiresAt",s.expiresAt);let{accessToken:g,expiresAt:u}=s,p={token:g,expiration:new Date(u)};if(p.expiration.getTime()-Date.now()>3e5)return p;if(Date.now()-y.getTime()<3e4)return C(p),p;m("clientId",s.clientId,!0),m("clientSecret",s.clientSecret,!0),m("refreshToken",s.refreshToken,!0);try{y.setTime(Date.now());let t=await v(s,c,e,r);m("accessToken",t.accessToken),m("expiresIn",t.expiresIn);let i=new Date(Date.now()+1e3*t.expiresIn);try{var w;let e;await (w={...s,accessToken:t.accessToken,expiresAt:i.toISOString(),refreshToken:t.refreshToken},e=(0,O.getSSOTokenFilepath)(l),k(e,JSON.stringify(w,null,2)))}catch(e){}return{token:t.accessToken,expiration:i}}catch(e){return C(p),p}})({profile:w,filepath:F,configFilepath:I,ignoreCache:P})();x={accessToken:e.token,expiresAt:new Date(e.expiration).toISOString()}}catch(e){throw new r.CredentialsProviderError(e.message,{tryNextLink:!1,logger:E})}else try{x=await (0,_.getSSOTokenFromFile)(s)}catch(e){throw new r.CredentialsProviderError(`The SSO session associated with this profile is invalid. ${A}`,{tryNextLink:!1,logger:E})}if(new Date(x.expiresAt).getTime()-Date.now()<=0)throw new r.CredentialsProviderError(`The SSO session associated with this profile has expired. ${A}`,{tryNextLink:!1,logger:E});let{accessToken:b}=x,{SSOClient:j,GetRoleCredentialsCommand:R}=await e.A(94624),N=a||new j(Object.assign({},c??{},{logger:c?.logger??p?.logger??g?.logger,region:c?.region??n,userAgentAppId:c?.userAgentAppId??p?.userAgentAppId??g?.userAgentAppId}));try{T=await N.send(new R({accountId:o,roleName:l,accessToken:b}))}catch(e){throw new r.CredentialsProviderError(e,{tryNextLink:!1,logger:E})}let{roleCredentials:{accessKeyId:$,secretAccessKey:D,sessionToken:L,expiration:G,credentialScope:q,accountId:H}={}}=T;if(!$||!D||!L||!G)throw new r.CredentialsProviderError("SSO returns an invalid temporary credential.",{tryNextLink:!1,logger:E});let X={accessKeyId:$,secretAccessKey:D,sessionToken:L,expiration:new Date(G),...q&&{credentialScope:q},...H&&{accountId:H}};return i?(0,u.setCredentialFeature)(X,"CREDENTIALS_SSO","s"):(0,u.setCredentialFeature)(X,"CREDENTIALS_SSO_LEGACY","u"),X},I=(e,t)=>{let{sso_start_url:s,sso_account_id:i,sso_region:o,sso_role_name:n}=e;if(!s||!i||!o||!n)throw new r.CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,{tryNextLink:!1,logger:t});return e};e.s(["validateSsoProfile",0,I],61980),e.s(["fromSSO",0,(e={})=>async({callerClientConfig:s}={})=>{e.logger?.debug("@aws-sdk/credential-provider-sso - fromSSO");let{ssoStartUrl:i,ssoAccountId:o,ssoRegion:n,ssoRoleName:l,ssoSession:a}=e,{ssoClient:c}=e,u=(0,t.getProfileName)({profile:e.profile??s?.profile});if(i||o||n||l||a)if(i&&o&&n&&l)return F({ssoStartUrl:i,ssoSession:a,ssoAccountId:o,ssoRegion:n,ssoRoleName:l,ssoClient:c,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,callerClientConfig:e.callerClientConfig,profile:u,filepath:e.filepath,configFilepath:e.configFilepath,ignoreCache:e.ignoreCache,logger:e.logger});else throw new r.CredentialsProviderError('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"',{tryNextLink:!1,logger:e.logger});{let t=(await (0,d.parseKnownFiles)(e))[u];if(!t)throw new r.CredentialsProviderError(`Profile ${u} was not found.`,{logger:e.logger});if(!g(t))throw new r.CredentialsProviderError(`Profile ${u} is not configured with SSO credentials.`,{logger:e.logger});if(t?.sso_session){let s=(await f(e))[t.sso_session],o=` configurations in profile ${u} and sso-session ${t.sso_session}`;if(n&&n!==s.sso_region)throw new r.CredentialsProviderError("Conflicting SSO region"+o,{tryNextLink:!1,logger:e.logger});if(i&&i!==s.sso_start_url)throw new r.CredentialsProviderError("Conflicting SSO start_url"+o,{tryNextLink:!1,logger:e.logger});t.sso_region=s.sso_region,t.sso_start_url=s.sso_start_url}let{sso_start_url:s,sso_account_id:o,sso_region:l,sso_role_name:a,sso_session:p}=I(t,e.logger);return F({ssoStartUrl:s,ssoSession:p,ssoAccountId:o,ssoRegion:l,ssoRoleName:a,ssoClient:c,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,callerClientConfig:e.callerClientConfig,profile:u,filepath:e.filepath,configFilepath:e.configFilepath,ignoreCache:e.ignoreCache,logger:e.logger})}}],75670)},26709,e=>{"use strict";e.s([],23957),e.i(23957);var r=e.i(75670),t=e.i(70487);e.s([],10105),e.i(10105);var s=e.i(61980);e.s(["fromSSO",()=>r.fromSSO,"isSsoProfile",()=>t.isSsoProfile,"validateSsoProfile",()=>s.validateSsoProfile],26709)},57227,e=>{e.v(r=>Promise.all(["server/chunks/[root-of-the-server]__82663332._.js","server/chunks/node_modules_@smithy_40d2d846._.js","server/chunks/[root-of-the-server]__ac1d7b3b._.js","server/chunks/[root-of-the-server]__9c092206._.js","server/chunks/node_modules_@smithy_db4b7bd5._.js","server/chunks/node_modules_0f1e6e09._.js","server/chunks/node_modules_@aws-sdk_nested-clients_dist-es_submodules_sso-oidc_index_df09d547.js"].map(r=>e.l(r))).then(()=>r(86799)))},94624,e=>{e.v(r=>Promise.all(["server/chunks/[root-of-the-server]__88206eff._.js","server/chunks/node_modules_@smithy_40d2d846._.js","server/chunks/[root-of-the-server]__a5c1b49e._.js","server/chunks/[root-of-the-server]__21195173._.js","server/chunks/node_modules_@smithy_db4b7bd5._.js","server/chunks/node_modules_0f1e6e09._.js","server/chunks/node_modules_@aws-sdk_6f97efc0._.js"].map(r=>e.l(r))).then(()=>r(56690)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__27931ad3._.js.map