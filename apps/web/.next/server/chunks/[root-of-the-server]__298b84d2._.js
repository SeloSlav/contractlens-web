module.exports=[66680,(e,r,t)=>{r.exports=e.x("node:crypto",()=>require("node:crypto"))},76535,e=>{"use strict";var r=e.i(46277);let t=async e=>{let t=await (0,r.loadSharedConfigFiles)(e);return((...e)=>{let r={};for(let t of e)for(let[e,o]of Object.entries(t))void 0!==r[e]?Object.assign(r[e],o):r[e]=o;return r})(t.configFile,t.credentialsFile)};e.s(["parseKnownFiles",0,t],76535)},39866,e=>{"use strict";var r=e.i(48979);e.s(["chain",0,(...e)=>async()=>{let t;if(0===e.length)throw new r.ProviderError("No providers in chain");for(let r of e)try{return await r()}catch(e){if(t=e,e?.tryNextLink)continue;throw e}throw t}])},89073,e=>{"use strict";class r{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.slice(-1)?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){var t;let o=new r({...e,headers:{...e.headers}});return o.query&&(o.query=Object.keys(t=o.query).reduce((e,r)=>{let o=t[r];return{...e,[r]:Array.isArray(o)?[...o]:o}},{})),o}static isInstance(e){return!!e&&"method"in e&&"protocol"in e&&"hostname"in e&&"path"in e&&"object"==typeof e.query&&"object"==typeof e.headers}clone(){return r.clone(this)}}e.s(["HttpRequest",()=>r])},15189,72783,e=>{"use strict";var r=e.i(39866);let t=(e,r,t)=>{let o,s,i,n=!1,a=async()=>{s||(s=e());try{o=await s,i=!0,n=!1}finally{s=void 0}return o};return void 0===r?async e=>((!i||e?.forceRefresh)&&(o=await a()),o):async e=>((!i||e?.forceRefresh)&&(o=await a()),n||(t&&!t(o)?n=!0:r(o)&&await a()),o)};e.s(["memoize",0,t],72783);var o=e.i(60400);function s(e){try{let r=new Set(Array.from(e.match(/([A-Z_]){3,}/g)??[]));return r.delete("CONFIG"),r.delete("CONFIG_PREFIX_SEPARATOR"),r.delete("ENV"),[...r].join(", ")}catch(r){return e}}var i=e.i(81355),n=e.i(46277);e.s(["loadConfig",0,({environmentVariableSelector:e,configFileSelector:a,default:l},c={})=>{let d,{signingName:f,logger:u}=c;return t((0,r.chain)((d={signingName:f,logger:u},async()=>{try{let r=e(process.env,d);if(void 0===r)throw Error();return r}catch(r){throw new o.CredentialsProviderError(r.message||`Not found in ENV: ${s(e.toString())}`,{logger:d?.logger})}}),((e,{preferredFile:r="config",...t}={})=>async()=>{let a=(0,i.getProfileName)(t),{configFile:l,credentialsFile:c}=await (0,n.loadSharedConfigFiles)(t),d=c[a]||{},f=l[a]||{},u="config"===r?{...d,...f}:{...f,...d};try{let t="config"===r?l:c,o=e(u,t);if(void 0===o)throw Error();return o}catch(r){throw new o.CredentialsProviderError(r.message||`Not found in config files w/ profile [${a}]: ${s(e.toString())}`,{logger:t.logger})}})(a,c),(e=>"function"==typeof e?async()=>await e():()=>Promise.resolve(e))(l)))}],15189)},41175,e=>{"use strict";let r=e=>{let t;if("string"==typeof e)return r(new URL(e));let{hostname:o,pathname:s,port:i,protocol:n,search:a}=e;return a&&(t=function(e){let r={};if(e=e.replace(/^\?/,""))for(let t of e.split("&")){let[e,o=null]=t.split("=");e=decodeURIComponent(e),o&&(o=decodeURIComponent(o)),e in r?Array.isArray(r[e])?r[e].push(o):r[e]=[r[e],o]:r[e]=o}return r}(a)),{hostname:o,port:i?parseInt(i):void 0,protocol:n,path:s,query:t}};e.s(["parseUrl",0,r],41175)},874,(e,r,t)=>{r.exports=e.x("buffer",()=>require("buffer"))},47797,34036,e=>{"use strict";let r=e=>"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e);e.s(["isArrayBuffer",0,r],34036);var t=e.i(874);e.s(["fromArrayBuffer",0,(e,o=0,s=e.byteLength-o)=>{if(!r(e))throw TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return t.Buffer.from(e,o,s)},"fromString",0,(e,r)=>{if("string"!=typeof e)throw TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return r?t.Buffer.from(e,r):t.Buffer.from(e)}],47797)},54799,(e,r,t)=>{r.exports=e.x("crypto",()=>require("crypto"))},60400,48979,e=>{"use strict";class r extends Error{name="ProviderError";tryNextLink;constructor(e,t=!0){let o,s=!0;"boolean"==typeof t?(o=void 0,s=t):null!=t&&"object"==typeof t&&(o=t.logger,s=t.tryNextLink??!0),super(e),this.tryNextLink=s,Object.setPrototypeOf(this,r.prototype),o?.debug?.(`@smithy/property-provider ${s?"->":"(!)"} ${e}`)}static from(e,r=!0){return Object.assign(new this(e.message,r),e)}}e.s(["ProviderError",()=>r],48979);class t extends r{name="CredentialsProviderError";constructor(e,r=!0){super(e,r),Object.setPrototypeOf(this,t.prototype)}}e.s(["CredentialsProviderError",()=>t],60400)},9212,e=>{"use strict";function r(e,r,t){return e.$source||(e.$source={}),e.$source[r]=t,e}e.s(["setCredentialFeature",()=>r])},14747,(e,r,t)=>{r.exports=e.x("path",()=>require("path"))},46786,(e,r,t)=>{r.exports=e.x("os",()=>require("os"))},12714,(e,r,t)=>{r.exports=e.x("node:fs/promises",()=>require("node:fs/promises"))},65790,49487,e=>{"use strict";var r=e.i(46786),t=e.i(14747);let o={};e.s(["getHomeDir",0,()=>{let{HOME:e,USERPROFILE:s,HOMEPATH:i,HOMEDRIVE:n=`C:${t.sep}`}=process.env;if(e)return e;if(s)return s;if(i)return`${n}${i}`;let a=process&&process.geteuid?`${process.geteuid()}`:"DEFAULT";return o[a]||(o[a]=(0,r.homedir)()),o[a]}],65790);var s=e.i(12714);let i={},n={};e.s(["fileIntercept",0,n,"readFile",0,(e,r)=>void 0!==n[e]?n[e]:((!i[e]||r?.ignoreCache)&&(i[e]=(0,s.readFile)(e,"utf8")),i[e])],49487)},81355,e=>{"use strict";let r="AWS_PROFILE";e.s(["ENV_PROFILE",0,r,"getProfileName",0,e=>e.profile||process.env[r]||"default"])},96405,3289,e=>{"use strict";var r,t;(t=r||(r={})).PROFILE="profile",t.SSO_SESSION="sso-session",t.SERVICES="services",e.s(["IniSectionType",()=>r],96405),e.s(["CONFIG_PREFIX_SEPARATOR",0,"."],3289)},21334,e=>{"use strict";var r=e.i(96405),t=e.i(3289);e.s(["getConfigData",0,e=>Object.entries(e).filter(([e])=>{let o=e.indexOf(t.CONFIG_PREFIX_SEPARATOR);return -1!==o&&Object.values(r.IniSectionType).includes(e.substring(0,o))}).reduce((e,[o,s])=>{let i=o.indexOf(t.CONFIG_PREFIX_SEPARATOR);return e[o.substring(0,i)===r.IniSectionType.PROFILE?o.substring(i+1):o]=s,e},{...e.default&&{default:e.default}})])},92395,e=>{"use strict";var r=e.i(14747),t=e.i(65790);e.s(["getConfigFilepath",0,()=>process.env.AWS_CONFIG_FILE||(0,r.join)((0,t.getHomeDir)(),".aws","config")])},61487,e=>{"use strict";var r=e.i(14747),t=e.i(65790);e.s(["getCredentialsFilepath",0,()=>process.env.AWS_SHARED_CREDENTIALS_FILE||(0,r.join)((0,t.getHomeDir)(),".aws","credentials")])},7104,e=>{"use strict";var r=e.i(96405),t=e.i(3289);let o=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,s=["__proto__","profile __proto__"];e.s(["parseIni",0,e=>{let i,n,a={};for(let l of e.split(/\r?\n/)){let e=l.split(/(^|\s)[;#]/)[0].trim();if("["===e[0]&&"]"===e[e.length-1]){i=void 0,n=void 0;let a=e.substring(1,e.length-1),l=o.exec(a);if(l){let[,e,,o]=l;Object.values(r.IniSectionType).includes(e)&&(i=[e,o].join(t.CONFIG_PREFIX_SEPARATOR))}else i=a;if(s.includes(a))throw Error(`Found invalid profile name "${a}"`)}else if(i){let r=e.indexOf("=");if(![0,-1].includes(r)){let[o,s]=[e.substring(0,r).trim(),e.substring(r+1).trim()];if(""===s)n=o;else{n&&l.trimStart()===l&&(n=void 0),a[i]=a[i]||{};let e=n?[n,o].join(t.CONFIG_PREFIX_SEPARATOR):o;a[i][e]=s}}}}return a}])},46277,e=>{"use strict";var r=e.i(14747),t=e.i(21334),o=e.i(92395),s=e.i(61487),i=e.i(65790),n=e.i(7104),a=e.i(49487);let l=()=>({}),c=async(e={})=>{let{filepath:c=(0,s.getCredentialsFilepath)(),configFilepath:d=(0,o.getConfigFilepath)()}=e,f=(0,i.getHomeDir)(),u=c;c.startsWith("~/")&&(u=(0,r.join)(f,c.slice(2)));let g=d;d.startsWith("~/")&&(g=(0,r.join)(f,d.slice(2)));let p=await Promise.all([(0,a.readFile)(g,{ignoreCache:e.ignoreCache}).then(n.parseIni).then(t.getConfigData).catch(l),(0,a.readFile)(u,{ignoreCache:e.ignoreCache}).then(n.parseIni).catch(l)]);return{configFile:p[0],credentialsFile:p[1]}};e.s(["loadSharedConfigFiles",0,c])},45786,e=>{"use strict";var r=e.i(12764),t=e.i(47797),o=e.i(88947),s=e.i(49151);let i=async e=>"function"==typeof Blob&&e instanceof Blob||e.constructor?.name==="Blob"?void 0!==Blob.prototype.arrayBuffer?new Uint8Array(await e.arrayBuffer()):n(e):a(e);async function n(e){var r;let t=await (r=e,new Promise((e,t)=>{let o=new FileReader;o.onloadend=()=>{if(2!==o.readyState)return t(Error("Reader aborted too early"));let r=o.result??"",s=r.indexOf(","),i=s>-1?s+1:r.length;e(r.substring(i))},o.onabort=()=>t(Error("Read aborted")),o.onerror=()=>t(o.error),o.readAsDataURL(r)}));return new Uint8Array((0,s.fromBase64)(t))}async function a(e){let r=[],t=e.getReader(),o=!1,s=0;for(;!o;){let{done:e,value:i}=await t.read();i&&(r.push(i),s+=i.length),o=e}let i=new Uint8Array(s),n=0;for(let e of r)i.set(e,n),n+=e.length;return i}var l=e.i(71225),c=e.i(83784),d=e.i(53536);let f=e=>"function"==typeof ReadableStream&&(e?.constructor?.name===ReadableStream.name||e instanceof ReadableStream),u="The stream has already been transformed.",g=e=>"function"==typeof Blob&&e instanceof Blob,p="The stream has already been transformed.";e.s(["sdkStreamMixin",0,e=>{if(!(e instanceof o.Readable))try{if(!g(e)&&!f(e)){let r=e?.__proto__?.constructor?.name||e;throw Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${r}`)}let r=!1,t=async()=>{if(r)throw Error(u);return r=!0,await i(e)};return Object.assign(e,{transformToByteArray:t,transformToString:async e=>{let r=await t();if("base64"===e)return(0,l.toBase64)(r);if("hex"===e)return(0,c.toHex)(r);if(void 0===e||"utf8"===e||"utf-8"===e)return(0,d.toUtf8)(r);if("function"==typeof TextDecoder)return new TextDecoder(e).decode(r);throw Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(r)throw Error(u);if(r=!0,g(e)){if("function"!=typeof e.stream)throw Error("Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.\nIf you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body");return e.stream()}if(f(e))return e;throw Error(`Cannot transform payload to web stream, got ${e}`)}})}catch(t){let r=e?.__proto__?.constructor?.name||e;throw Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${r}`)}let s=!1,n=async()=>{if(s)throw Error(p);return s=!0,await (0,r.streamCollector)(e)};return Object.assign(e,{transformToByteArray:n,transformToString:async e=>{let r=await n();return void 0===e||Buffer.isEncoding(e)?(0,t.fromArrayBuffer)(r.buffer,r.byteOffset,r.byteLength).toString(e):new TextDecoder(e).decode(r)},transformToWebStream:()=>{if(s)throw Error(p);if(null!==e.readableFlowing)throw Error("The stream has been consumed by other callbacks.");if("function"!=typeof o.Readable.toWeb)throw Error("Readable.toWeb() is not supported. Please ensure a polyfill is available.");return s=!0,o.Readable.toWeb(e)}})}],45786)},33405,(e,r,t)=>{r.exports=e.x("child_process",()=>require("child_process"))},73554,e=>{"use strict";var r=e.i(81355),t=e.i(76535),o=e.i(60400),s=e.i(7729),i=e.i(33405),n=e.i(24361),a=e.i(9212);let l=async(e,r,t)=>{let l=r[e];if(r[e]){let d=l.credential_process;if(void 0!==d){let l=(0,n.promisify)(s.externalDataInterceptor?.getTokenRecord?.().exec??i.exec);try{let t,{stdout:o}=await l(d);try{t=JSON.parse(o.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}var c=t;if(1!==c.Version)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(void 0===c.AccessKeyId||void 0===c.SecretAccessKey)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(c.Expiration){let r=new Date;if(new Date(c.Expiration)<r)throw Error(`Profile ${e} credential_process returned expired credentials.`)}let s=c.AccountId;!s&&r?.[e]?.aws_account_id&&(s=r[e].aws_account_id);let i={accessKeyId:c.AccessKeyId,secretAccessKey:c.SecretAccessKey,...c.SessionToken&&{sessionToken:c.SessionToken},...c.Expiration&&{expiration:new Date(c.Expiration)},...c.CredentialScope&&{credentialScope:c.CredentialScope},...s&&{accountId:s}};return(0,a.setCredentialFeature)(i,"CREDENTIALS_PROCESS","w"),i}catch(e){throw new o.CredentialsProviderError(e.message,{logger:t})}}throw new o.CredentialsProviderError(`Profile ${e} did not contain credential_process.`,{logger:t})}throw new o.CredentialsProviderError(`Profile ${e} could not be found in shared credentials file.`,{logger:t})};e.s(["fromProcess",0,(e={})=>async({callerClientConfig:o}={})=>{e.logger?.debug("@aws-sdk/credential-provider-process - fromProcess");let s=await (0,t.parseKnownFiles)(e);return l((0,r.getProfileName)({profile:e.profile??o?.profile}),s,e.logger)}],73554)},22734,(e,r,t)=>{r.exports=e.x("fs",()=>require("fs"))},24868,(e,r,t)=>{r.exports=e.x("fs/promises",()=>require("fs/promises"))},23897,32961,e=>{"use strict";var r=e.i(24868),t=e.i(54799),o=e.i(14747),s=e.i(65790);let i=e=>{let r=(0,t.createHash)("sha1").update(e).digest("hex");return(0,o.join)((0,s.getHomeDir)(),".aws","sso","cache",`${r}.json`)};e.s(["getSSOTokenFilepath",0,i],32961);let n={},a=async e=>{if(n[e])return n[e];let t=i(e);return JSON.parse(await (0,r.readFile)(t,"utf8"))};e.s(["getSSOTokenFromFile",0,a,"tokenIntercept",0,n],23897)},7729,e=>{"use strict";var r=e.i(23897),t=e.i(49487);e.s(["externalDataInterceptor",0,{getFileRecord:()=>t.fileIntercept,interceptFile(e,r){t.fileIntercept[e]=Promise.resolve(r)},getTokenRecord:()=>r.tokenIntercept,interceptToken(e,t){r.tokenIntercept[e]=t}}])},93875,93966,e=>{"use strict";var r=e.i(9212),t=e.i(60400),o=e.i(7729),s=e.i(22734);let i=r=>async t=>{r.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");let{roleArn:o,roleSessionName:s,webIdentityToken:i,providerId:n,policyArns:a,policy:l,durationSeconds:c}=r,{roleAssumerWithWebIdentity:d}=r;if(!d){let{getDefaultRoleAssumerWithWebIdentity:o}=await e.A(43109);d=o({...r.clientConfig,credentialProviderLogger:r.logger,parentClientConfig:{...t?.callerClientConfig,...r.parentClientConfig}},r.clientPlugins)}return d({RoleArn:o,RoleSessionName:s??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:i,ProviderId:n,PolicyArns:a,Policy:l,DurationSeconds:c})};e.s(["fromWebToken",0,i],93966);let n="AWS_WEB_IDENTITY_TOKEN_FILE";e.s(["fromTokenFile",0,(e={})=>async a=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");let l=e?.webIdentityTokenFile??process.env[n],c=e?.roleArn??process.env.AWS_ROLE_ARN,d=e?.roleSessionName??process.env.AWS_ROLE_SESSION_NAME;if(!l||!c)throw new t.CredentialsProviderError("Web identity configuration not specified",{logger:e.logger});let f=await i({...e,webIdentityToken:o.externalDataInterceptor?.getTokenRecord?.()[l]??(0,s.readFileSync)(l,{encoding:"ascii"}),roleArn:c,roleSessionName:d})(a);return l===process.env[n]&&(0,r.setCredentialFeature)(f,"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN","h"),f}],93875)},7335,e=>{"use strict";var r=e.i(9212),t=e.i(60400);let o="AWS_ACCESS_KEY_ID",s="AWS_SECRET_ACCESS_KEY",i="AWS_SESSION_TOKEN",n="AWS_CREDENTIAL_EXPIRATION",a="AWS_CREDENTIAL_SCOPE",l="AWS_ACCOUNT_ID";e.s(["ENV_ACCOUNT_ID",0,l,"ENV_CREDENTIAL_SCOPE",0,a,"ENV_EXPIRATION",0,n,"ENV_KEY",0,o,"ENV_SECRET",0,s,"ENV_SESSION",0,i,"fromEnv",0,e=>async()=>{e?.logger?.debug("@aws-sdk/credential-provider-env - fromEnv");let c=process.env[o],d=process.env[s],f=process.env[i],u=process.env[n],g=process.env[a],p=process.env[l];if(c&&d){let e={accessKeyId:c,secretAccessKey:d,...f&&{sessionToken:f},...u&&{expiration:new Date(u)},...g&&{credentialScope:g},...p&&{accountId:p}};return(0,r.setCredentialFeature)(e,"CREDENTIALS_ENV_VARS","g"),e}throw new t.CredentialsProviderError("Unable to find environment variable credentials.",{logger:e?.logger})}])},6334,e=>{"use strict";var r=e.i(7335),t=e.i(60400),o=e.i(81355),s=e.i(39866);let i="AWS_EC2_METADATA_DISABLED",n=async r=>{let{ENV_CMDS_FULL_URI:o,ENV_CMDS_RELATIVE_URI:n,fromContainerMetadata:a,fromInstanceMetadata:l}=await e.A(14277);if(process.env[n]||process.env[o]){r.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata");let{fromHttp:t}=await e.A(93306);return(0,s.chain)(t(r),a(r))}return process.env[i]&&"false"!==process.env[i]?async()=>{throw new t.CredentialsProviderError("EC2 Instance Metadata Service access disabled",{logger:r.logger})}:(r.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata"),l(r))},a=!1,l=e=>e?.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5;e.s(["defaultProvider",0,(s={})=>{let i,c,d,f,u,g;return g=[async()=>{if(s.profile??process.env[o.ENV_PROFILE])throw process.env[r.ENV_KEY]&&process.env[r.ENV_SECRET]&&!a&&((s.logger?.warn&&s.logger?.constructor?.name!=="NoOpLogger"?s.logger.warn.bind(s.logger):console.warn)(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:
    Multiple credential sources detected: 
    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.
    This SDK will proceed with the AWS_PROFILE value.
    
    However, a future version may change this behavior to prefer the ENV static credentials.
    Please ensure that your environment only sets either the AWS_PROFILE or the
    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.
`),a=!0),new t.CredentialsProviderError("AWS_PROFILE is set, skipping fromEnv provider.",{logger:s.logger,tryNextLink:!0});return s.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromEnv"),(0,r.fromEnv)(s)()},async r=>{s.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromSSO");let{ssoStartUrl:o,ssoAccountId:i,ssoRegion:n,ssoRoleName:a,ssoSession:l}=s;if(!o&&!i&&!n&&!a&&!l)throw new t.CredentialsProviderError("Skipping SSO provider in default chain (inputs do not include SSO fields).",{logger:s.logger});let{fromSSO:c}=await e.A(14115);return c(s)(r)},async r=>{s.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromIni");let{fromIni:t}=await e.A(9193);return t(s)(r)},async r=>{s.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromProcess");let{fromProcess:t}=await e.A(85365);return t(s)(r)},async r=>{s.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile");let{fromTokenFile:t}=await e.A(52170);return t(s)(r)},async()=>(s.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::remoteProvider"),(await n(s))()),async()=>{throw new t.CredentialsProviderError("Could not load credentials from any providers",{tryNextLink:!1,logger:s.logger})}],f=async e=>{let r;for(let t of g)try{return await t(e)}catch(e){if(r=e,e?.tryNextLink)continue;throw e}throw r},u=async e=>{if(e?.forceRefresh)return await f(e);if(d?.expiration&&d?.expiration?.getTime()<Date.now()&&(d=void 0),i)await i;else if(!d||l?.(d))if(!d)return i=f(e).then(e=>{d=e}).finally(()=>{i=void 0}),u(e);else c||(c=f(e).then(e=>{d=e}).finally(()=>{c=void 0}));return d}}],6334)},20878,e=>{"use strict";var r=e.i(9212),t=e.i(84912),o=e.i(60400),s=e.i(24868),i=e.i(89073),n=e.i(19898),a=e.i(45786);async function l(e,r){let t=(0,a.sdkStreamMixin)(e.body),s=await t.transformToString();if(200===e.statusCode){let e=JSON.parse(s);if("string"!=typeof e.AccessKeyId||"string"!=typeof e.SecretAccessKey||"string"!=typeof e.Token||"string"!=typeof e.Expiration)throw new o.CredentialsProviderError("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }",{logger:r});return{accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:(0,n.parseRfc3339DateTime)(e.Expiration)}}if(e.statusCode>=400&&e.statusCode<500){let t={};try{t=JSON.parse(s)}catch(e){}throw Object.assign(new o.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:r}),{Code:t.Code,Message:t.Message})}throw new o.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:r})}e.s(["fromHttp",0,(e={})=>{let n,a,c,d;e.logger?.debug("@aws-sdk/credential-provider-http - fromHttp");let f=e.awsContainerCredentialsRelativeUri??process.env.AWS_CONTAINER_CREDENTIALS_RELATIVE_URI,u=e.awsContainerCredentialsFullUri??process.env.AWS_CONTAINER_CREDENTIALS_FULL_URI,g=e.awsContainerAuthorizationToken??process.env.AWS_CONTAINER_AUTHORIZATION_TOKEN,p=e.awsContainerAuthorizationTokenFile??process.env.AWS_CONTAINER_AUTHORIZATION_TOKEN_FILE,h=e.logger?.constructor?.name!=="NoOpLogger"&&e.logger?.warn?e.logger.warn.bind(e.logger):console.warn;if(f&&u&&(h("@aws-sdk/credential-provider-http: you have set both awsContainerCredentialsRelativeUri and awsContainerCredentialsFullUri."),h("awsContainerCredentialsFullUri will take precedence.")),g&&p&&(h("@aws-sdk/credential-provider-http: you have set both awsContainerAuthorizationToken and awsContainerAuthorizationTokenFile."),h("awsContainerAuthorizationToken will take precedence.")),u)n=u;else if(f)n=`http://169.254.170.2${f}`;else throw new o.CredentialsProviderError(`No HTTP credential provider host provided.
Set AWS_CONTAINER_CREDENTIALS_FULL_URI or AWS_CONTAINER_CREDENTIALS_RELATIVE_URI.`,{logger:e.logger});let _=new URL(n);((e,r)=>{if("https:"!==e.protocol&&"169.254.170.2"!==e.hostname&&"169.254.170.23"!==e.hostname&&"[fd00:ec2::23]"!==e.hostname){if(e.hostname.includes("[")){if("[::1]"===e.hostname||"[0000:0000:0000:0000:0000:0000:0000:0001]"===e.hostname)return}else{if("localhost"===e.hostname)return;let r=e.hostname.split("."),t=e=>{let r=parseInt(e,10);return 0<=r&&r<=255};if("127"===r[0]&&t(r[1])&&t(r[2])&&t(r[3])&&4===r.length)return}throw new o.CredentialsProviderError(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:r})}})(_,e.logger);let w=t.NodeHttpHandler.create({requestTimeout:e.timeout??1e3,connectionTimeout:e.timeout??1e3});return a=async()=>{let t=new i.HttpRequest({protocol:_.protocol,hostname:_.hostname,port:Number(_.port),path:_.pathname,query:Array.from(_.searchParams.entries()).reduce((e,[r,t])=>(e[r]=t,e),{}),fragment:_.hash});g?t.headers.Authorization=g:p&&(t.headers.Authorization=(await s.default.readFile(p)).toString());try{let e=await w.handle(t);return l(e.response).then(e=>(0,r.setCredentialFeature)(e,"CREDENTIALS_HTTP","z"))}catch(r){throw new o.CredentialsProviderError(String(r),{logger:e.logger})}},c=e.maxRetries??3,d=e.timeout??1e3,async()=>{for(let e=0;e<c;++e)try{return await a()}catch(e){await new Promise(e=>setTimeout(e,d))}return await a()}}],20878)},75670,70487,61980,e=>{"use strict";var r=e.i(60400),t=e.i(81355),o=e.i(92395),s=e.i(96405),i=e.i(3289);let n=e=>Object.entries(e).filter(([e])=>e.startsWith(s.IniSectionType.SSO_SESSION+i.CONFIG_PREFIX_SEPARATOR)).reduce((e,[r,t])=>({...e,[r.substring(r.indexOf(i.CONFIG_PREFIX_SEPARATOR)+1)]:t}),{});var a=e.i(7104),l=e.i(49487);let c=()=>({}),d=async(e={})=>(0,l.readFile)(e.configFilepath??(0,o.getConfigFilepath)()).then(a.parseIni).then(n).catch(c);var f=e.i(76535);let u=e=>e&&("string"==typeof e.sso_start_url||"string"==typeof e.sso_account_id||"string"==typeof e.sso_session||"string"==typeof e.sso_region||"string"==typeof e.sso_role_name);e.s(["isSsoProfile",0,u],70487);var g=e.i(9212),p=e.i(48979);class h extends p.ProviderError{name="TokenProviderError";constructor(e,r=!0){super(e,r),Object.setPrototypeOf(this,h.prototype)}}var _=e.i(23897);let w="To refresh this SSO session run 'aws sso login' with the corresponding profile.",v=async(r,t={},o)=>{let{SSOOIDCClient:s}=await e.A(57227),i=e=>t.clientConfig?.[e]??t.parentClientConfig?.[e]??o?.[e];return new s(Object.assign({},t.clientConfig??{},{region:r??t.clientConfig?.region,logger:i("logger"),userAgentAppId:i("userAgentAppId")}))},m=async(r,t,o={},s)=>{let{CreateTokenCommand:i}=await e.A(57227);return(await v(t,o,s)).send(new i({clientId:r.clientId,clientSecret:r.clientSecret,refreshToken:r.refreshToken,grantType:"refresh_token"}))},y=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new h(`Token is expired. ${w}`,!1)},E=(e,r,t=!1)=>{if(void 0===r)throw new h(`Value not present for '${e}' in SSO Token${t?". Cannot refresh":""}. ${w}`,!1)};var S=e.i(32961);let{writeFile:C}=e.i(22734).promises,I=new Date(0),A=async({ssoStartUrl:o,ssoSession:s,ssoAccountId:i,ssoRegion:n,ssoRoleName:a,ssoClient:l,clientConfig:c,parentClientConfig:u,callerClientConfig:p,profile:v,filepath:A,configFilepath:k,ignoreCache:T,logger:b})=>{let P,R,O="To refresh this SSO session run aws sso login with the corresponding profile.";if(s)try{let e=await ((e={})=>async({callerClientConfig:r}={})=>{let o;e.logger?.debug("@aws-sdk/token-providers - fromSso");let s=await (0,f.parseKnownFiles)(e),i=(0,t.getProfileName)({profile:e.profile??r?.profile}),n=s[i];if(n){if(!n.sso_session)throw new h(`Profile '${i}' is missing required property 'sso_session'.`)}else throw new h(`Profile '${i}' could not be found in shared credentials file.`,!1);let a=n.sso_session,l=(await d(e))[a];if(!l)throw new h(`Sso session '${a}' could not be found in shared credentials file.`,!1);for(let e of["sso_start_url","sso_region"])if(!l[e])throw new h(`Sso session '${a}' is missing required property '${e}'.`,!1);l.sso_start_url;let c=l.sso_region;try{o=await (0,_.getSSOTokenFromFile)(a)}catch(e){throw new h(`The SSO session token associated with profile=${i} was not found or is invalid. ${w}`,!1)}E("accessToken",o.accessToken),E("expiresAt",o.expiresAt);let{accessToken:u,expiresAt:g}=o,p={token:u,expiration:new Date(g)};if(p.expiration.getTime()-Date.now()>3e5)return p;if(Date.now()-I.getTime()<3e4)return y(p),p;E("clientId",o.clientId,!0),E("clientSecret",o.clientSecret,!0),E("refreshToken",o.refreshToken,!0);try{I.setTime(Date.now());let t=await m(o,c,e,r);E("accessToken",t.accessToken),E("expiresIn",t.expiresIn);let s=new Date(Date.now()+1e3*t.expiresIn);try{var v;let e;await (v={...o,accessToken:t.accessToken,expiresAt:s.toISOString(),refreshToken:t.refreshToken},e=(0,S.getSSOTokenFilepath)(a),C(e,JSON.stringify(v,null,2)))}catch(e){}return{token:t.accessToken,expiration:s}}catch(e){return y(p),p}})({profile:v,filepath:A,configFilepath:k,ignoreCache:T})();P={accessToken:e.token,expiresAt:new Date(e.expiration).toISOString()}}catch(e){throw new r.CredentialsProviderError(e.message,{tryNextLink:!1,logger:b})}else try{P=await (0,_.getSSOTokenFromFile)(o)}catch(e){throw new r.CredentialsProviderError(`The SSO session associated with this profile is invalid. ${O}`,{tryNextLink:!1,logger:b})}if(new Date(P.expiresAt).getTime()-Date.now()<=0)throw new r.CredentialsProviderError(`The SSO session associated with this profile has expired. ${O}`,{tryNextLink:!1,logger:b});let{accessToken:N}=P,{SSOClient:x,GetRoleCredentialsCommand:F}=await e.A(94624),D=l||new x(Object.assign({},c??{},{logger:c?.logger??p?.logger??u?.logger,region:c?.region??n,userAgentAppId:c?.userAgentAppId??p?.userAgentAppId??u?.userAgentAppId}));try{R=await D.send(new F({accountId:i,roleName:a,accessToken:N}))}catch(e){throw new r.CredentialsProviderError(e,{tryNextLink:!1,logger:b})}let{roleCredentials:{accessKeyId:L,secretAccessKey:j,sessionToken:$,expiration:K,credentialScope:W,accountId:U}={}}=R;if(!L||!j||!$||!K)throw new r.CredentialsProviderError("SSO returns an invalid temporary credential.",{tryNextLink:!1,logger:b});let B={accessKeyId:L,secretAccessKey:j,sessionToken:$,expiration:new Date(K),...W&&{credentialScope:W},...U&&{accountId:U}};return s?(0,g.setCredentialFeature)(B,"CREDENTIALS_SSO","s"):(0,g.setCredentialFeature)(B,"CREDENTIALS_SSO_LEGACY","u"),B},k=(e,t)=>{let{sso_start_url:o,sso_account_id:s,sso_region:i,sso_role_name:n}=e;if(!o||!s||!i||!n)throw new r.CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,{tryNextLink:!1,logger:t});return e};e.s(["validateSsoProfile",0,k],61980),e.s(["fromSSO",0,(e={})=>async({callerClientConfig:o}={})=>{e.logger?.debug("@aws-sdk/credential-provider-sso - fromSSO");let{ssoStartUrl:s,ssoAccountId:i,ssoRegion:n,ssoRoleName:a,ssoSession:l}=e,{ssoClient:c}=e,g=(0,t.getProfileName)({profile:e.profile??o?.profile});if(s||i||n||a||l)if(s&&i&&n&&a)return A({ssoStartUrl:s,ssoSession:l,ssoAccountId:i,ssoRegion:n,ssoRoleName:a,ssoClient:c,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,callerClientConfig:e.callerClientConfig,profile:g,filepath:e.filepath,configFilepath:e.configFilepath,ignoreCache:e.ignoreCache,logger:e.logger});else throw new r.CredentialsProviderError('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"',{tryNextLink:!1,logger:e.logger});{let t=(await (0,f.parseKnownFiles)(e))[g];if(!t)throw new r.CredentialsProviderError(`Profile ${g} was not found.`,{logger:e.logger});if(!u(t))throw new r.CredentialsProviderError(`Profile ${g} is not configured with SSO credentials.`,{logger:e.logger});if(t?.sso_session){let o=(await d(e))[t.sso_session],i=` configurations in profile ${g} and sso-session ${t.sso_session}`;if(n&&n!==o.sso_region)throw new r.CredentialsProviderError("Conflicting SSO region"+i,{tryNextLink:!1,logger:e.logger});if(s&&s!==o.sso_start_url)throw new r.CredentialsProviderError("Conflicting SSO start_url"+i,{tryNextLink:!1,logger:e.logger});t.sso_region=o.sso_region,t.sso_start_url=o.sso_start_url}let{sso_start_url:o,sso_account_id:i,sso_region:a,sso_role_name:l,sso_session:p}=k(t,e.logger);return A({ssoStartUrl:o,ssoSession:p,ssoAccountId:i,ssoRegion:a,ssoRoleName:l,ssoClient:c,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,callerClientConfig:e.callerClientConfig,profile:g,filepath:e.filepath,configFilepath:e.configFilepath,ignoreCache:e.ignoreCache,logger:e.logger})}}],75670)},74340,14706,20695,51792,39734,82842,e=>{"use strict";var r,t,o,s,i=e.i(60400),n=e.i(92509),a=e.i(48979),l=e.i(874),c=e.i(21517);function d(e){return new Promise((r,t)=>{let o=(0,c.request)({method:"GET",...e,hostname:e.hostname?.replace(/^\[(.+)\]$/,"$1")});o.on("error",e=>{t(Object.assign(new a.ProviderError("Unable to connect to instance metadata service"),e)),o.destroy()}),o.on("timeout",()=>{t(new a.ProviderError("TimeoutError from instance metadata service")),o.destroy()}),o.on("response",e=>{let{statusCode:s=400}=e;(s<200||300<=s)&&(t(Object.assign(new a.ProviderError("Error response received from instance metadata service"),{statusCode:s})),o.destroy());let i=[];e.on("data",e=>{i.push(e)}),e.on("end",()=>{r(l.Buffer.concat(i)),o.destroy()})}),o.end()})}e.s(["httpRequest",()=>d],14706);let f=e=>!!e&&"object"==typeof e&&"string"==typeof e.AccessKeyId&&"string"==typeof e.SecretAccessKey&&"string"==typeof e.Token&&"string"==typeof e.Expiration,u=e=>({accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration),...e.AccountId&&{accountId:e.AccountId}}),g=1e3,p=0,h=({maxRetries:e=p,timeout:r=g})=>({maxRetries:e,timeout:r});e.s(["DEFAULT_MAX_RETRIES",0,p,"DEFAULT_TIMEOUT",0,g,"providerConfigFromInit",0,h],20695);let _=(e,r)=>{let t=e();for(let o=0;o<r;o++)t=t.catch(e);return t},w="AWS_CONTAINER_CREDENTIALS_FULL_URI",v="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",m="AWS_CONTAINER_AUTHORIZATION_TOKEN",y=async(e,r)=>(process.env[m]&&(r.headers={...r.headers,Authorization:process.env[m]}),(await d({...r,timeout:e})).toString()),E={localhost:!0,"127.0.0.1":!0},S={"http:":!0,"https:":!0},C=async({logger:e})=>{if(process.env[v])return{hostname:"169.254.170.2",path:process.env[v]};if(process.env[w]){let r=(0,n.parse)(process.env[w]);if(!r.hostname||!(r.hostname in E))throw new i.CredentialsProviderError(`${r.hostname} is not a valid container metadata service hostname`,{tryNextLink:!1,logger:e});if(!r.protocol||!(r.protocol in S))throw new i.CredentialsProviderError(`${r.protocol} is not a valid container metadata service protocol`,{tryNextLink:!1,logger:e});return{...r,port:r.port?parseInt(r.port,10):void 0}}throw new i.CredentialsProviderError(`The container metadata credential provider cannot be used unless the ${v} or ${w} environment variable is set`,{tryNextLink:!1,logger:e})};e.s(["ENV_CMDS_AUTH_TOKEN",0,m,"ENV_CMDS_FULL_URI",0,w,"ENV_CMDS_RELATIVE_URI",0,v,"fromContainerMetadata",0,(e={})=>{let{timeout:r,maxRetries:t}=h(e);return()=>_(async()=>{let t=await C({logger:e.logger}),o=JSON.parse(await y(r,t));if(!f(o))throw new i.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:e.logger});return u(o)},t)}],74340);var I=e.i(15189),A=i;class k extends A.CredentialsProviderError{tryNextLink;name="InstanceMetadataV1FallbackError";constructor(e,r=!0){super(e,r),this.tryNextLink=r,Object.setPrototypeOf(this,k.prototype)}}var T=e.i(41175);(r=o||(o={})).IPv4="http://169.254.169.254",r.IPv6="http://[fd00:ec2::254]",e.s(["Endpoint",()=>o],51792);let b={environmentVariableSelector:e=>e.AWS_EC2_METADATA_SERVICE_ENDPOINT,configFileSelector:e=>e.ec2_metadata_service_endpoint,default:void 0};(t=s||(s={})).IPv4="IPv4",t.IPv6="IPv6";let P={environmentVariableSelector:e=>e.AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE,configFileSelector:e=>e.ec2_metadata_service_endpoint_mode,default:s.IPv4},R=async()=>(0,T.parseUrl)(await O()||await N()),O=async()=>(0,I.loadConfig)(b)(),N=async()=>{let e=await (0,I.loadConfig)(P)();switch(e){case s.IPv4:return o.IPv4;case s.IPv6:return o.IPv6;default:throw Error(`Unsupported endpoint mode: ${e}. Select from ${Object.values(s)}`)}};e.s(["getInstanceMetadataEndpoint",0,R],39734);let x=(e,r)=>{let t=300+Math.floor(300*Math.random()),o=new Date(Date.now()+1e3*t);r.warn(`Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(o)}.
For more information, please visit: https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html`);let s=e.originalExpiration??e.expiration;return{...e,...s?{originalExpiration:s}:{},expiration:o}},F="/latest/meta-data/iam/security-credentials/",D="AWS_EC2_METADATA_V1_DISABLED",L="ec2_metadata_v1_disabled",j="x-aws-ec2-metadata-token",$=async e=>d({...e,path:"/latest/api/token",method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),K=async e=>(await d({...e,path:F})).toString(),W=async(e,r,t)=>{let o=JSON.parse((await d({...r,path:F+e})).toString());if(!f(o))throw new i.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:t.logger});return u(o)};e.s(["fromInstanceMetadata",0,(e={})=>((e,r={})=>{let t,o=r?.logger||console;return async()=>{let r;try{(r=await e()).expiration&&r.expiration.getTime()<Date.now()&&(r=x(r,o))}catch(e){if(t)o.warn("Credential renew failed: ",e),r=x(t,o);else throw e}return t=r,r}})(((e={})=>{let r=!1,{logger:t,profile:o}=e,{timeout:s,maxRetries:n}=h(e),a=async(t,s)=>{if(r||s.headers?.[j]==null){let r=!1,t=!1,s=await (0,I.loadConfig)({environmentVariableSelector:r=>{let o=r[D];if(t=!!o&&"false"!==o,void 0===o)throw new i.CredentialsProviderError(`${D} not set in env, checking config file next.`,{logger:e.logger});return t},configFileSelector:e=>{let t=e[L];return r=!!t&&"false"!==t},default:!1},{profile:o})();if(e.ec2MetadataV1Disabled||s){let o=[];throw e.ec2MetadataV1Disabled&&o.push("credential provider initialization (runtime option ec2MetadataV1Disabled)"),r&&o.push(`config file profile (${L})`),t&&o.push(`process environment variable (${D})`),new k(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${o.join(", ")}].`)}}let n=(await _(async()=>{let e;try{e=await K(s)}catch(e){throw 401===e.statusCode&&(r=!1),e}return e},t)).trim();return _(async()=>{let t;try{t=await W(n,s,e)}catch(e){throw 401===e.statusCode&&(r=!1),e}return t},t)};return async()=>{let e=await R();if(r)return t?.debug("AWS SDK Instance Metadata","using v1 fallback (no token fetch)"),a(n,{...e,timeout:s});{let o;try{o=(await $({...e,timeout:s})).toString()}catch(o){if(o?.statusCode===400)throw Object.assign(o,{message:"EC2 Metadata token request returned error"});return("TimeoutError"===o.message||[403,404,405].includes(o.statusCode))&&(r=!0),t?.debug("AWS SDK Instance Metadata","using v1 fallback (initial)"),a(n,{...e,timeout:s})}return a(n,{...e,headers:{[j]:o},timeout:s})}}})(e),{logger:e.logger})],82842)},60526,(e,r,t)=>{r.exports=e.x("node:os",()=>require("node:os"))},50227,(e,r,t)=>{r.exports=e.x("node:path",()=>require("node:path"))},24518,10906,e=>{"use strict";var r=e.i(81355),t=e.i(76535),o=e.i(60400),s=e.i(9212),i=e.i(39866);let n=e=>(0,s.setCredentialFeature)(e,"CREDENTIALS_PROFILE_NAMED_PROVIDER","p"),a=async(t,a,c,d,f={},u)=>{c.logger?.debug("@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)");let g=a[t],{source_profile:p,region:h}=g;if(!c.roleAssumer){let{getDefaultRoleAssumer:r}=await e.A(43109);c.roleAssumer=r({...c.clientConfig,credentialProviderLogger:c.logger,parentClientConfig:{...d,...c?.parentClientConfig,region:h??c?.parentClientConfig?.region??d?.region}},c.clientPlugins)}if(p&&p in f)throw new o.CredentialsProviderError(`Detected a cycle attempting to resolve credentials for profile ${(0,r.getProfileName)(c)}. Profiles visited: `+Object.keys(f).join(", "),{logger:c.logger});c.logger?.debug(`@aws-sdk/credential-provider-ini - finding credential resolver using ${p?`source_profile=[${p}]`:`profile=[${t}]`}`);let _=p?u(p,a,c,d,{...f,[p]:!0},l(a[p]??{})):(await ((r,t,s)=>{let a={EcsContainer:async r=>{let{fromHttp:t}=await e.A(93306),{fromContainerMetadata:o}=await e.A(14277);return s?.debug("@aws-sdk/credential-provider-ini - credential_source is EcsContainer"),async()=>(0,i.chain)(t(r??{}),o(r))().then(n)},Ec2InstanceMetadata:async r=>{s?.debug("@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata");let{fromInstanceMetadata:t}=await e.A(14277);return async()=>t(r)().then(n)},Environment:async r=>{s?.debug("@aws-sdk/credential-provider-ini - credential_source is Environment");let{fromEnv:t}=await e.A(31605);return async()=>t(r)().then(n)}};if(r in a)return a[r];throw new o.CredentialsProviderError(`Unsupported credential source in profile ${t}. Got ${r}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:s})})(g.credential_source,t,c.logger)(c))();if(l(g))return _.then(e=>(0,s.setCredentialFeature)(e,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"));{let e={RoleArn:g.role_arn,RoleSessionName:g.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:g.external_id,DurationSeconds:parseInt(g.duration_seconds||"3600",10)},{mfa_serial:r}=g;if(r){if(!c.mfaCodeProvider)throw new o.CredentialsProviderError(`Profile ${t} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:c.logger,tryNextLink:!1});e.SerialNumber=r,e.TokenCode=await c.mfaCodeProvider(r)}let i=await _;return c.roleAssumer(i,e).then(e=>(0,s.setCredentialFeature)(e,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"))}},l=e=>!e.role_arn&&!!e.credential_source;var c=e.i(89073),d=e.i(49487),f=e.i(66680),u=e.i(2157),g=e.i(60526),p=e.i(50227);class h{profileData;init;callerClientConfig;static REFRESH_THRESHOLD=3e5;constructor(e,r,t){this.profileData=e,this.init=r,this.callerClientConfig=t}async loadCredentials(){let e=await this.loadToken();if(!e)throw new o.CredentialsProviderError(`Failed to load a token for session ${this.loginSession}, please re-authenticate using aws login`,{tryNextLink:!1,logger:this.logger});let r=e.accessToken,t=Date.now();return new Date(r.expiresAt).getTime()-t<=h.REFRESH_THRESHOLD?this.refresh(e):{accessKeyId:r.accessKeyId,secretAccessKey:r.secretAccessKey,sessionToken:r.sessionToken,accountId:r.accountId,expiration:new Date(r.expiresAt)}}get logger(){return this.init?.logger}get loginSession(){return this.profileData.login_session}async refresh(r){let t,{SigninClient:s,CreateOAuth2TokenCommand:i}=await e.A(54608),{logger:n,userAgentAppId:a}=this.callerClientConfig??{},l=(t=this.callerClientConfig?.requestHandler,t?.metadata?.handlerProtocol==="h2")?void 0:this.callerClientConfig?.requestHandler,c=new s({credentials:{accessKeyId:"",secretAccessKey:""},region:this.profileData.region??await this.callerClientConfig?.region?.()??process.env.AWS_REGION,requestHandler:l,logger:n,userAgentAppId:a,...this.init?.clientConfig});this.createDPoPInterceptor(c.middlewareStack);let d={tokenInput:{clientId:r.clientId,refreshToken:r.refreshToken,grantType:"refresh_token"}};try{let e=await c.send(new i(d)),{accessKeyId:t,secretAccessKey:s,sessionToken:n}=e.tokenOutput?.accessToken??{},{refreshToken:a,expiresIn:l}=e.tokenOutput??{};if(!t||!s||!n||!a)throw new o.CredentialsProviderError("Token refresh response missing required fields",{logger:this.logger,tryNextLink:!1});let f=new Date(Date.now()+(l??900)*1e3),u={...r,accessToken:{...r.accessToken,accessKeyId:t,secretAccessKey:s,sessionToken:n,expiresAt:f.toISOString()},refreshToken:a};await this.saveToken(u);let g=u.accessToken;return{accessKeyId:g.accessKeyId,secretAccessKey:g.secretAccessKey,sessionToken:g.sessionToken,accountId:g.accountId,expiration:f}}catch(e){if("AccessDeniedException"===e.name){let r;switch(e.error){case"TOKEN_EXPIRED":r="Your session has expired. Please reauthenticate.";break;case"USER_CREDENTIALS_CHANGED":r="Unable to refresh credentials because of a change in your password. Please reauthenticate with your new password.";break;case"INSUFFICIENT_PERMISSIONS":r="Unable to refresh credentials due to insufficient permissions. You may be missing permission for the 'CreateOAuth2Token' action.";break;default:r=`Failed to refresh token: ${String(e)}. Please re-authenticate using \`aws login\``}throw new o.CredentialsProviderError(r,{logger:this.logger,tryNextLink:!1})}throw new o.CredentialsProviderError(`Failed to refresh token: ${String(e)}. Please re-authenticate using aws login`,{logger:this.logger})}}async loadToken(){let e=this.getTokenFilePath();try{let r;try{r=await (0,d.readFile)(e,{ignoreCache:this.init?.ignoreCache})}catch{r=await u.promises.readFile(e,"utf8")}let t=JSON.parse(r),s=["accessToken","clientId","refreshToken","dpopKey"].filter(e=>!t[e]);if(t.accessToken?.accountId||s.push("accountId"),s.length>0)throw new o.CredentialsProviderError(`Token validation failed, missing fields: ${s.join(", ")}`,{logger:this.logger,tryNextLink:!1});return t}catch(r){throw new o.CredentialsProviderError(`Failed to load token from ${e}: ${String(r)}`,{logger:this.logger,tryNextLink:!1})}}async saveToken(e){let r=this.getTokenFilePath(),t=(0,p.dirname)(r);try{await u.promises.mkdir(t,{recursive:!0})}catch(e){}await u.promises.writeFile(r,JSON.stringify(e,null,2),"utf8")}getTokenFilePath(){let e=process.env.AWS_LOGIN_CACHE_DIRECTORY??(0,p.join)((0,g.homedir)(),".aws","login","cache"),r=Buffer.from(this.loginSession,"utf8"),t=(0,f.createHash)("sha256").update(r).digest("hex");return(0,p.join)(e,`${t}.json`)}derToRawSignature(e){let r=2;if(2!==e[2])throw Error("Invalid DER signature");r++;let t=e[r++],o=e.subarray(r,r+t);if(2!==e[r+=t])throw Error("Invalid DER signature");r++;let s=e[r++],i=e.subarray(r,r+s);o=0===o[0]?o.subarray(1):o,i=0===i[0]?i.subarray(1):i;let n=Buffer.concat([Buffer.alloc(32-o.length),o]),a=Buffer.concat([Buffer.alloc(32-i.length),i]);return Buffer.concat([n,a])}createDPoPInterceptor(e){e.add(e=>async r=>{if(c.HttpRequest.isInstance(r.request)){let e=r.request,t=`${e.protocol}//${e.hostname}${e.port?`:${e.port}`:""}${e.path}`,o=await this.generateDpop(e.method,t);e.headers={...e.headers,DPoP:o}}return e(r)},{step:"finalizeRequest",name:"dpopInterceptor",override:!0})}async generateDpop(e="POST",r){let t=await this.loadToken();try{let o=(0,f.createPrivateKey)({key:t.dpopKey,format:"pem",type:"sec1"}),s=(0,f.createPublicKey)(o).export({format:"der",type:"spki"}),i=-1;for(let e=0;e<s.length;e++)if(4===s[e]){i=e;break}let n=s.slice(i+1,i+33),a=s.slice(i+33,i+65),l={alg:"ES256",typ:"dpop+jwt",jwk:{kty:"EC",crv:"P-256",x:n.toString("base64url"),y:a.toString("base64url")}},c={jti:crypto.randomUUID(),htm:e,htu:r,iat:Math.floor(Date.now()/1e3)},d=Buffer.from(JSON.stringify(l)).toString("base64url"),u=Buffer.from(JSON.stringify(c)).toString("base64url"),g=`${d}.${u}`,p=(0,f.sign)("sha256",Buffer.from(g),o),h=this.derToRawSignature(p).toString("base64url");return`${g}.${h}`}catch(e){throw new o.CredentialsProviderError(`Failed to generate Dpop proof: ${e instanceof Error?e.message:String(e)}`,{logger:this.logger,tryNextLink:!1})}}}let _=e=>async({callerClientConfig:i}={})=>{e?.logger?.debug?.("@aws-sdk/credential-providers - fromLoginCredentials");let n=await (0,t.parseKnownFiles)(e||{}),a=(0,r.getProfileName)({profile:e?.profile??i?.profile}),l=n[a];if(!l?.login_session)throw new o.CredentialsProviderError(`Profile ${a} does not contain login_session.`,{tryNextLink:!0,logger:e?.logger});let c=new h(l,e,i),d=await c.loadCredentials();return(0,s.setCredentialFeature)(d,"CREDENTIALS_LOGIN","AD")};e.s(["fromLoginCredentials",0,_],10906);let w=async(e,r,t)=>{let o=await _({...r,profile:e})({callerClientConfig:t});return(0,s.setCredentialFeature)(o,"CREDENTIALS_PROFILE_LOGIN","AC")},v=async(r,t)=>e.A(85365).then(({fromProcess:e})=>e({...r,profile:t})().then(e=>(0,s.setCredentialFeature)(e,"CREDENTIALS_PROFILE_PROCESS","v"))),m=async(r,t,o={},i)=>{let{fromSSO:n}=await e.A(14115);return n({profile:r,logger:o.logger,parentClientConfig:o.parentClientConfig,clientConfig:o.clientConfig})({callerClientConfig:i}).then(e=>t.sso_session?(0,s.setCredentialFeature)(e,"CREDENTIALS_PROFILE_SSO","r"):(0,s.setCredentialFeature)(e,"CREDENTIALS_PROFILE_SSO_LEGACY","t"))},y=e=>!!e&&"object"==typeof e&&"string"==typeof e.aws_access_key_id&&"string"==typeof e.aws_secret_access_key&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1&&["undefined","string"].indexOf(typeof e.aws_account_id)>-1,E=async(e,r)=>{r?.logger?.debug("@aws-sdk/credential-provider-ini - resolveStaticCredentials");let t={accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token,...e.aws_credential_scope&&{credentialScope:e.aws_credential_scope},...e.aws_account_id&&{accountId:e.aws_account_id}};return(0,s.setCredentialFeature)(t,"CREDENTIALS_PROFILE","n")},S=async(r,t,o)=>e.A(52170).then(({fromTokenFile:e})=>e({webIdentityTokenFile:r.web_identity_token_file,roleArn:r.role_arn,roleSessionName:r.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity,logger:t.logger,parentClientConfig:t.parentClientConfig})({callerClientConfig:o}).then(e=>(0,s.setCredentialFeature)(e,"CREDENTIALS_PROFILE_STS_WEB_ID_TOKEN","q"))),C=async(e,r,t,s,i={},n=!1)=>{let l=r[e];if(Object.keys(i).length>0&&y(l))return E(l,t);if(n||((e,{profile:r="default",logger:t}={})=>!!e&&"object"==typeof e&&"string"==typeof e.role_arn&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(((e,{profile:r,logger:t})=>{let o="string"==typeof e.source_profile&&void 0===e.credential_source;return o&&t?.debug?.(`    ${r} isAssumeRoleWithSourceProfile source_profile=${e.source_profile}`),o})(e,{profile:r,logger:t})||((e,{profile:r,logger:t})=>{let o="string"==typeof e.credential_source&&void 0===e.source_profile;return o&&t?.debug?.(`    ${r} isCredentialSourceProfile credential_source=${e.credential_source}`),o})(e,{profile:r,logger:t})))(l,{profile:e,logger:t.logger}))return a(e,r,t,s,i,C);if(y(l))return E(l,t);if(l&&"object"==typeof l&&"string"==typeof l.web_identity_token_file&&"string"==typeof l.role_arn&&["undefined","string"].indexOf(typeof l.role_session_name)>-1)return S(l,t,s);if(l&&"object"==typeof l&&"string"==typeof l.credential_process)return v(t,e);if(l&&("string"==typeof l.sso_start_url||"string"==typeof l.sso_account_id||"string"==typeof l.sso_session||"string"==typeof l.sso_region||"string"==typeof l.sso_role_name))return await m(e,l,t,s);if(l&&l.login_session)return w(e,t,s);throw new o.CredentialsProviderError(`Could not resolve credentials using profile: [${e}] in configuration/credentials file(s).`,{logger:t.logger})};e.s(["fromIni",0,(e={})=>async({callerClientConfig:o}={})=>{e.logger?.debug("@aws-sdk/credential-provider-ini - fromIni");let s=await (0,t.parseKnownFiles)(e);return C((0,r.getProfileName)({profile:e.profile??o?.profile}),s,e,o)}],24518)},11195,e=>{e.v(r=>Promise.all(["server/chunks/[root-of-the-server]__09190852._.js","server/chunks/[root-of-the-server]__96942f72._.js","server/chunks/node_modules_@smithy_40d2d846._.js","server/chunks/node_modules_@aws-sdk_credential-provider-cognito-identity_bc790556._.js","server/chunks/node_modules_@smithy_db4b7bd5._.js","server/chunks/[root-of-the-server]__032ceedb._.js"].map(r=>e.l(r))).then(()=>r(60846)))},93306,e=>{e.v(r=>Promise.all(["server/chunks/[root-of-the-server]__3022ab35._.js","server/chunks/node_modules_@smithy_39d03167._.js"].map(r=>e.l(r))).then(()=>r(38788)))},14277,e=>{e.v(r=>Promise.all(["server/chunks/[root-of-the-server]__bf04eac2._.js"].map(r=>e.l(r))).then(()=>r(63152)))},31605,e=>{e.v(r=>Promise.all(["server/chunks/node_modules_a5f9d6c0._.js"].map(r=>e.l(r))).then(()=>r(97301)))},43109,e=>{e.v(r=>Promise.all(["server/chunks/[root-of-the-server]__763de2e1._.js","server/chunks/node_modules_@smithy_40d2d846._.js","server/chunks/[root-of-the-server]__c4dfde3a._.js","server/chunks/node_modules_@aws-sdk_4fb19574._.js","server/chunks/node_modules_@smithy_db4b7bd5._.js","server/chunks/[root-of-the-server]__f97cc522._.js"].map(r=>e.l(r))).then(()=>r(90222)))},54608,e=>{e.v(r=>Promise.all(["server/chunks/[root-of-the-server]__82663332._.js","server/chunks/node_modules_@aws-sdk_nested-clients_dist-es_submodules_signin_index_6712dec9.js","server/chunks/[root-of-the-server]__ac1d7b3b._.js","server/chunks/[root-of-the-server]__9c092206._.js","server/chunks/node_modules_@smithy_db4b7bd5._.js","server/chunks/node_modules_0f1e6e09._.js","server/chunks/node_modules_@smithy_40d2d846._.js"].map(r=>e.l(r))).then(()=>r(20083)))},85365,e=>{e.v(r=>Promise.all(["server/chunks/[root-of-the-server]__b083210a._.js"].map(r=>e.l(r))).then(()=>r(33073)))},14115,e=>{e.v(r=>Promise.all(["server/chunks/[root-of-the-server]__27931ad3._.js"].map(r=>e.l(r))).then(()=>r(26709)))},52170,e=>{e.v(r=>Promise.all(["server/chunks/[root-of-the-server]__8a36790b._.js"].map(r=>e.l(r))).then(()=>r(23492)))},9193,e=>{e.v(r=>Promise.all(["server/chunks/[root-of-the-server]__4fd14a0b._.js"].map(r=>e.l(r))).then(()=>r(1346)))},57227,e=>{e.v(r=>Promise.all(["server/chunks/[root-of-the-server]__82663332._.js","server/chunks/node_modules_@smithy_40d2d846._.js","server/chunks/[root-of-the-server]__ac1d7b3b._.js","server/chunks/[root-of-the-server]__9c092206._.js","server/chunks/node_modules_@smithy_db4b7bd5._.js","server/chunks/node_modules_0f1e6e09._.js","server/chunks/node_modules_@aws-sdk_nested-clients_dist-es_submodules_sso-oidc_index_df09d547.js"].map(r=>e.l(r))).then(()=>r(86799)))},94624,e=>{e.v(r=>Promise.all(["server/chunks/[root-of-the-server]__88206eff._.js","server/chunks/node_modules_@smithy_40d2d846._.js","server/chunks/[root-of-the-server]__a5c1b49e._.js","server/chunks/[root-of-the-server]__21195173._.js","server/chunks/node_modules_@smithy_db4b7bd5._.js","server/chunks/node_modules_0f1e6e09._.js","server/chunks/node_modules_@aws-sdk_6f97efc0._.js"].map(r=>e.l(r))).then(()=>r(56690)))},97055,e=>{e.v(r=>Promise.all(["server/chunks/[root-of-the-server]__33443276._.js","server/chunks/node_modules_@smithy_40d2d846._.js","server/chunks/[root-of-the-server]__0a048f59._.js","server/chunks/node_modules_@aws-sdk_559eefd6._.js","server/chunks/node_modules_@smithy_db4b7bd5._.js","server/chunks/[root-of-the-server]__bba2a585._.js"].map(r=>e.l(r))).then(()=>r(70373)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__298b84d2._.js.map