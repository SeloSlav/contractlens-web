module.exports=[72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},35608,a=>{"use strict";var b=a.i(87924),c=a.i(38246),d=a.i(50944),e=a.i(72131);function f({docId:a,status:f}){let[g,h]=(0,e.useState)(!1),i=(0,d.useRouter)();async function j(){h(!0);try{let b=await fetch("/api/ingest",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({docId:a})});if(!b.ok){let a=await b.json();throw Error(a.error??"Ingest failed")}i.refresh()}catch(a){alert(a instanceof Error?a.message:"Ingest failed")}finally{h(!1)}}return(0,b.jsxs)("div",{className:"flex gap-4 mt-8 flex-wrap",children:["queued"===f&&(0,b.jsx)("button",{onClick:j,disabled:g,className:"px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 disabled:opacity-50",children:g?"Ingesting...":"Run Ingest"}),(0,b.jsx)(c.default,{href:`/docs/${a}/chat`,className:"px-4 py-2 bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900 rounded-lg hover:opacity-90",children:"Chat"}),(0,b.jsx)(c.default,{href:`/docs/${a}/analyze`,className:"px-4 py-2 border border-zinc-300 dark:border-zinc-600 rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-800",children:"Analyze"})]})}a.s(["DocActions",()=>f])},17461,a=>{"use strict";var b=a.i(87924),c=a.i(72131);async function d(a,b,c,d){await fetch("/api/feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({runId:a,findingId:b,rating:c,note:d})})}function e({docId:a}){let[e,f]=(0,c.useState)([]),[g,h]=(0,c.useState)(null),[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)(new Set);(0,c.useEffect)(()=>{fetch(`/api/runs?docId=${a}`).then(a=>a.json()).then(a=>{f(a.runs??[]);let b=(a.runs??[]).find(a=>"analysis"===a.type&&a.outputs?.findings);b&&h(b._id)})},[a]);let m=e.find(a=>a._id===g),n=m?.outputs?.findings??[];return 0===e.length?null:(0,b.jsxs)("div",{className:"mt-8",children:[(0,b.jsx)("h2",{className:"text-lg font-medium text-zinc-900 dark:text-zinc-100 mb-4",children:"Findings"}),0===n.length?(0,b.jsx)("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm",children:"No findings yet. Run analysis to generate findings."}):(0,b.jsx)("div",{className:"space-y-2",children:n.map((a,c)=>{let e=`${g}-${c}`,f=a.citations?.[0]?.chunkId??e,h=i===e;return(0,b.jsxs)("div",{className:"border border-zinc-200 dark:border-zinc-700 rounded-lg overflow-hidden",children:[(0,b.jsxs)("button",{onClick:()=>j(h?null:e),className:"w-full px-4 py-3 flex items-center gap-4 text-left hover:bg-zinc-50 dark:hover:bg-zinc-800/50",children:[(0,b.jsx)("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${"high"===a.risk_level?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":"medium"===a.risk_level?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400"}`,children:a.risk_level}),(0,b.jsx)("span",{className:"text-xs text-zinc-500",children:a.category}),(0,b.jsx)("span",{className:"flex-1 font-medium",children:a.title}),(0,b.jsxs)("span",{className:"text-xs text-zinc-500",children:[Math.round((a.confidence??0)*100),"%"]}),(0,b.jsx)("span",{className:"text-zinc-400",children:h?"âˆ’":"+"})]}),h&&(0,b.jsxs)("div",{className:"px-4 pb-4 pt-0 border-t border-zinc-200 dark:border-zinc-700 bg-zinc-50 dark:bg-zinc-900/30",children:[(0,b.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-2",children:a.description}),a.why_it_matters&&(0,b.jsxs)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-2",children:[(0,b.jsx)("strong",{children:"Why it matters:"})," ",a.why_it_matters]}),a.suggested_questions&&a.suggested_questions.length>0&&(0,b.jsxs)("div",{className:"mt-2",children:[(0,b.jsx)("strong",{className:"text-sm",children:"Suggested questions:"}),(0,b.jsx)("ul",{className:"list-disc list-inside text-sm text-zinc-600 dark:text-zinc-400 mt-1",children:a.suggested_questions.map((a,c)=>(0,b.jsx)("li",{children:a},c))})]}),a.suggested_redline&&(0,b.jsxs)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-2",children:[(0,b.jsx)("strong",{children:"Suggested redline:"})," ",a.suggested_redline]}),(0,b.jsxs)("div",{className:"mt-3 flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>{g&&(d(g,f,1),l(a=>new Set(a).add(`${e}-up`)))},disabled:k.has(`${e}-up`),className:"px-2 py-1 text-sm border border-zinc-300 dark:border-zinc-600 rounded hover:bg-zinc-100 dark:hover:bg-zinc-800 disabled:opacity-50",children:"ðŸ‘"}),(0,b.jsx)("button",{onClick:()=>{g&&(d(g,f,-1),l(a=>new Set(a).add(`${e}-down`)))},disabled:k.has(`${e}-down`),className:"px-2 py-1 text-sm border border-zinc-300 dark:border-zinc-600 rounded hover:bg-zinc-100 dark:hover:bg-zinc-800 disabled:opacity-50",children:"ðŸ‘Ž"})]}),a.citations&&a.citations.length>0&&(0,b.jsxs)("div",{className:"mt-3",children:[(0,b.jsx)("strong",{className:"text-sm",children:"Evidence:"}),(0,b.jsx)("div",{className:"mt-2 space-y-2",children:a.citations.map((a,c)=>(0,b.jsxs)("div",{className:"p-2 bg-white dark:bg-zinc-800 rounded border border-zinc-200 dark:border-zinc-700 text-xs",children:[(0,b.jsx)("span",{className:"font-mono text-zinc-500",children:a.chunkId}),(0,b.jsx)("p",{className:"mt-1 text-zinc-600 dark:text-zinc-400",children:a.snippet})]},c))})]})]})]},e)})})]})}a.s(["FindingsTable",()=>e])},61654,a=>{"use strict";var b=a.i(87924),c=a.i(72131);function d({docId:a}){let[d,e]=(0,c.useState)([]);return((0,c.useEffect)(()=>{fetch(`/api/runs?docId=${a}`).then(a=>a.json()).then(a=>e(a.runs??[]))},[a]),0===d.length)?null:(0,b.jsxs)("div",{className:"mt-8",children:[(0,b.jsx)("h2",{className:"text-lg font-medium text-zinc-900 dark:text-zinc-100 mb-4",children:"Run History"}),(0,b.jsx)("div",{className:"space-y-2",children:d.map(a=>(0,b.jsxs)("div",{className:"flex items-center gap-4 p-3 border border-zinc-200 dark:border-zinc-700 rounded-lg text-sm",children:[(0,b.jsx)("span",{className:"text-zinc-500",children:a.type}),(0,b.jsx)("span",{className:"text-zinc-500",children:new Date(a.createdAt).toLocaleString()}),(0,b.jsx)("span",{className:`px-2 py-0.5 rounded text-xs ${"completed"===a.status||"ready"===a.status?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"failed"===a.status?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400"}`,children:a.status}),null!=a.durationMs&&(0,b.jsxs)("span",{className:"text-zinc-500",children:[a.durationMs,"ms"]})]},a._id))})]})}a.s(["RunHistory",()=>d])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__3a072b0d._.js.map