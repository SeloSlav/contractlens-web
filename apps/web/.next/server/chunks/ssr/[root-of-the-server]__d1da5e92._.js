module.exports=[72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},70077,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(50944);async function f(a,b){let c=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({docId:a,messages:b})});if(!c.ok)throw Error((await c.json()).error??"Chat failed");return c.json()}function g(){let a=(0,e.useParams)(),g=a?.docId,[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)([]),p=(0,c.useRef)(null);async function q(a){if(a.preventDefault(),!g||!j.trim()||l)return;let b={role:"user",content:j.trim()};i(a=>[...a,b]),k(""),m(!0);try{let{answer:a,citations:c}=await f(g,[...h,b]);i(b=>[...b,{role:"assistant",content:a}]),o(c??[])}catch(a){i(b=>[...b,{role:"assistant",content:`Error: ${a instanceof Error?a.message:"Unknown error"}`}])}finally{m(!1)}}return((0,c.useEffect)(()=>{p.current?.scrollIntoView({behavior:"smooth"})},[h]),g)?(0,b.jsxs)("div",{className:"min-h-screen bg-zinc-50 dark:bg-black flex flex-col",children:[(0,b.jsx)("header",{className:"border-b border-zinc-200 dark:border-zinc-800 p-4",children:(0,b.jsxs)("div",{className:"max-w-3xl mx-auto flex items-center gap-4",children:[(0,b.jsx)(d.default,{href:`/docs/${g}`,className:"text-zinc-600 dark:text-zinc-400 hover:underline",children:"â† Back"}),(0,b.jsx)("h1",{className:"font-semibold",children:"Chat with Document"})]})}),(0,b.jsx)("main",{className:"flex-1 overflow-y-auto p-4",children:(0,b.jsxs)("div",{className:"max-w-3xl mx-auto space-y-4",children:[0===h.length&&(0,b.jsx)("p",{className:"text-zinc-500 dark:text-zinc-400 text-center py-12",children:"Ask a question about this contract. Answers include citations."}),h.map((a,c)=>(0,b.jsx)("div",{className:`p-4 rounded-lg ${"user"===a.role?"bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900 ml-8":"bg-zinc-200 dark:bg-zinc-800 mr-8"}`,children:(0,b.jsx)("p",{className:"whitespace-pre-wrap",children:a.content})},c)),l&&(0,b.jsx)("div",{className:"flex gap-2 p-4 text-zinc-500",children:(0,b.jsx)("span",{className:"animate-pulse",children:"Thinking..."})}),(0,b.jsx)("div",{ref:p})]})}),n.length>0&&(0,b.jsx)("div",{className:"border-t border-zinc-200 dark:border-zinc-800 p-4 bg-zinc-100 dark:bg-zinc-900/50",children:(0,b.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2",children:"Citations"}),(0,b.jsx)("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:n.map((a,c)=>(0,b.jsxs)("div",{className:"text-xs p-2 bg-white dark:bg-zinc-800 rounded border border-zinc-200 dark:border-zinc-700",children:[(0,b.jsx)("span",{className:"font-mono text-zinc-500",children:a.chunkId}),(0,b.jsx)("p",{className:"mt-1 text-zinc-600 dark:text-zinc-400 line-clamp-2",children:a.snippet})]},c))})]})}),(0,b.jsx)("form",{onSubmit:q,className:"p-4 border-t border-zinc-200 dark:border-zinc-800",children:(0,b.jsxs)("div",{className:"max-w-3xl mx-auto flex gap-2",children:[(0,b.jsx)("input",{type:"text",value:j,onChange:a=>k(a.target.value),placeholder:"Ask about the contract...",className:"flex-1 px-4 py-2 border border-zinc-300 dark:border-zinc-600 rounded-lg bg-white dark:bg-zinc-900 text-zinc-900 dark:text-zinc-100",disabled:l}),(0,b.jsx)("button",{type:"submit",disabled:l,className:"px-4 py-2 bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900 rounded-lg hover:opacity-90 disabled:opacity-50",children:"Send"})]})})]}):null}a.s(["default",()=>g])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__d1da5e92._.js.map