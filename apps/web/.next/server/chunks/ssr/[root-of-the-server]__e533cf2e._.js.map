{"version":3,"sources":["../../../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../../../node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-server-dom-turbopack-client.ts","../../../../../../apps/web/app/docs/%5BdocId%5D/analyze/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactServerDOMTurbopackClient\n","\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport Link from \"next/link\";\nimport { useParams } from \"next/navigation\";\n\nexport default function AnalyzePage() {\n  const params = useParams();\n  const docId = params?.docId as string | undefined;\n  const [runId, setRunId] = useState<string | null>(null);\n  const [events, setEvents] = useState<{ type: string; node?: string; data?: unknown }[]>([]);\n  const [findings, setFindings] = useState<unknown[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  async function startAnalysis() {\n    if (!docId || loading) return;\n    setLoading(true);\n    setError(null);\n    setEvents([]);\n    setFindings([]);\n\n    try {\n      const res = await fetch(\"/api/analyze\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ docId }),\n      });\n      const data = await res.json();\n      if (!res.ok) throw new Error(data.error ?? \"Failed to start\");\n      setRunId(data.runId);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : \"Failed\");\n      setLoading(false);\n    }\n  }\n\n  useEffect(() => {\n    if (!runId || !docId) return;\n\n    const es = new EventSource(`/api/analyze/stream?runId=${runId}`);\n\n    es.onmessage = (e) => {\n      try {\n        const data = JSON.parse(e.data);\n        setEvents((prev) => [...prev, data]);\n        if (data.type === \"complete\" && data.findings) {\n          setFindings(data.findings);\n          setLoading(false);\n          es.close();\n        }\n        if (data.type === \"error\") {\n          setError(data.error ?? \"Unknown error\");\n          setLoading(false);\n          es.close();\n        }\n      } catch {\n        // ignore parse errors\n      }\n    };\n\n    es.onerror = () => {\n      setLoading(false);\n      es.close();\n    };\n\n    return () => es.close();\n  }, [runId, docId]);\n\n  if (!docId) return null;\n\n  return (\n    <div className=\"min-h-screen bg-zinc-50 dark:bg-black p-8\">\n      <div className=\"max-w-4xl mx-auto\">\n        <Link\n          href={`/docs/${docId}`}\n          className=\"text-zinc-600 dark:text-zinc-400 hover:underline mb-6 inline-block\"\n        >\n          ‚Üê Back\n        </Link>\n        <h1 className=\"text-2xl font-semibold text-zinc-900 dark:text-zinc-100 mb-4\">\n          Run Analysis\n        </h1>\n\n        <button\n          onClick={startAnalysis}\n          disabled={loading}\n          className=\"px-4 py-2 bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900 rounded-lg hover:opacity-90 disabled:opacity-50 mb-6\"\n        >\n          {loading ? \"Analyzing...\" : \"Run Analysis\"}\n        </button>\n\n        {error && (\n          <p className=\"text-red-600 dark:text-red-400 mb-4\">{error}</p>\n        )}\n\n        {events.length > 0 && (\n          <div className=\"mb-8\">\n            <h2 className=\"text-lg font-medium mb-2\">Progress</h2>\n            <div className=\"space-y-1 text-sm\">\n              {events\n                .filter((e) => e.type === \"node\")\n                .map((e, i) => (\n                  <div key={i} className=\"text-zinc-600 dark:text-zinc-400\">\n                    {e.node}\n                  </div>\n                ))}\n            </div>\n          </div>\n        )}\n\n        {findings.length > 0 && (\n          <div>\n            <h2 className=\"text-lg font-medium mb-4\">Findings</h2>\n            <div className=\"space-y-4\">\n              {(findings as Record<string, unknown>[]).map((f, i) => (\n                <div\n                  key={i}\n                  className=\"p-4 border border-zinc-200 dark:border-zinc-700 rounded-lg\"\n                >\n                  <div className=\"flex gap-2 items-center mb-2\">\n                    <span\n                      className={`px-2 py-0.5 rounded text-xs ${\n                        f.risk_level === \"high\"\n                          ? \"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400\"\n                          : f.risk_level === \"medium\"\n                            ? \"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400\"\n                            : \"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400\"\n                      }`}\n                    >\n                      {String(f.risk_level)}\n                    </span>\n                    <span className=\"text-zinc-500 text-xs\">\n                      {String(f.category)}\n                    </span>\n                    <span className=\"text-zinc-500 text-xs\">\n                      {Math.round((Number(f.confidence) ?? 0) * 100)}% conf\n                    </span>\n                  </div>\n                  <h3 className=\"font-medium text-zinc-900 dark:text-zinc-100\">\n                    {String(f.title)}\n                  </h3>\n                  <p className=\"text-sm text-zinc-600 dark:text-zinc-400 mt-1\">\n                    {String(f.description)}\n                  </p>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":["module","exports","require","vendored","React","AppRouterContext","HooksClientContext","ServerInsertedHtml","process","env","NEXT_RUNTIME","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","ReactJsxRuntime","ReactServerDOMTurbopackClient"],"mappings":"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","ignoreList":[0,1,2,3,4,5,6]}