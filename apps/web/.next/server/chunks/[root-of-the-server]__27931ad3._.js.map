{"version":3,"sources":["../../../../../node_modules/%40smithy/property-provider/dist-es/ProviderError.js","../../../../../node_modules/%40smithy/property-provider/dist-es/CredentialsProviderError.js","../../../../../node_modules/%40aws-sdk/core/dist-es/submodules/client/setCredentialFeature.js","../../../../../node_modules/%40smithy/shared-ini-file-loader/dist-es/getHomeDir.js","../../../../../node_modules/%40smithy/shared-ini-file-loader/dist-es/readFile.js","../../../../../node_modules/%40smithy/shared-ini-file-loader/dist-es/getProfileName.js","../../../../../node_modules/%40smithy/shared-ini-file-loader/dist-es/getConfigFilepath.js","../../../../../node_modules/%40smithy/types/dist-es/profile.js","../../../../../node_modules/%40smithy/shared-ini-file-loader/dist-es/constants.js","../../../../../node_modules/%40smithy/shared-ini-file-loader/dist-es/parseIni.js","../../../../../node_modules/%40smithy/shared-ini-file-loader/dist-es/getConfigData.js","../../../../../node_modules/%40smithy/shared-ini-file-loader/dist-es/getCredentialsFilepath.js","../../../../../node_modules/%40smithy/shared-ini-file-loader/dist-es/loadSharedConfigFiles.js","../../../../../node_modules/%40smithy/shared-ini-file-loader/dist-es/parseKnownFiles.js","../../../../../node_modules/%40smithy/shared-ini-file-loader/dist-es/mergeConfigFiles.js","../../../../../node_modules/%40smithy/shared-ini-file-loader/dist-es/getSSOTokenFromFile.js","../../../../../node_modules/%40smithy/shared-ini-file-loader/dist-es/getSSOTokenFilepath.js","../../../../../node_modules/%40aws-sdk/credential-provider-sso/dist-es/fromSSO.js","../../../../../node_modules/%40smithy/shared-ini-file-loader/dist-es/loadSsoSessionData.js","../../../../../node_modules/%40smithy/shared-ini-file-loader/dist-es/getSsoSessionData.js","../../../../../node_modules/%40aws-sdk/credential-provider-sso/dist-es/isSsoProfile.js","../../../../../node_modules/%40aws-sdk/credential-provider-sso/dist-es/resolveSSOCredentials.js","../../../../../node_modules/%40smithy/property-provider/dist-es/TokenProviderError.js","../../../../../node_modules/%40aws-sdk/token-providers/dist-es/fromSso.js","../../../../../node_modules/%40aws-sdk/token-providers/dist-es/constants.js","../../../../../node_modules/%40aws-sdk/token-providers/dist-es/getSsoOidcClient.js","../../../../../node_modules/%40aws-sdk/token-providers/dist-es/getNewSsoOidcToken.js","../../../../../node_modules/%40aws-sdk/token-providers/dist-es/validateTokenExpiry.js","../../../../../node_modules/%40aws-sdk/token-providers/dist-es/validateTokenKey.js","../../../../../node_modules/%40aws-sdk/token-providers/dist-es/writeSSOTokenToFile.js","../../../../../node_modules/%40aws-sdk/credential-provider-sso/dist-es/validateSsoProfile.js"],"sourcesContent":["export class ProviderError extends Error {\n    name = \"ProviderError\";\n    tryNextLink;\n    constructor(message, options = true) {\n        let logger;\n        let tryNextLink = true;\n        if (typeof options === \"boolean\") {\n            logger = undefined;\n            tryNextLink = options;\n        }\n        else if (options != null && typeof options === \"object\") {\n            logger = options.logger;\n            tryNextLink = options.tryNextLink ?? true;\n        }\n        super(message);\n        this.tryNextLink = tryNextLink;\n        Object.setPrototypeOf(this, ProviderError.prototype);\n        logger?.debug?.(`@smithy/property-provider ${tryNextLink ? \"->\" : \"(!)\"} ${message}`);\n    }\n    static from(error, options = true) {\n        return Object.assign(new this(error.message, options), error);\n    }\n}\n","import { ProviderError } from \"./ProviderError\";\nexport class CredentialsProviderError extends ProviderError {\n    name = \"CredentialsProviderError\";\n    constructor(message, options = true) {\n        super(message, options);\n        Object.setPrototypeOf(this, CredentialsProviderError.prototype);\n    }\n}\n","export function setCredentialFeature(credentials, feature, value) {\n    if (!credentials.$source) {\n        credentials.$source = {};\n    }\n    credentials.$source[feature] = value;\n    return credentials;\n}\n","import { homedir } from \"os\";\nimport { sep } from \"path\";\nconst homeDirCache = {};\nconst getHomeDirCacheKey = () => {\n    if (process && process.geteuid) {\n        return `${process.geteuid()}`;\n    }\n    return \"DEFAULT\";\n};\nexport const getHomeDir = () => {\n    const { HOME, USERPROFILE, HOMEPATH, HOMEDRIVE = `C:${sep}` } = process.env;\n    if (HOME)\n        return HOME;\n    if (USERPROFILE)\n        return USERPROFILE;\n    if (HOMEPATH)\n        return `${HOMEDRIVE}${HOMEPATH}`;\n    const homeDirCacheKey = getHomeDirCacheKey();\n    if (!homeDirCache[homeDirCacheKey])\n        homeDirCache[homeDirCacheKey] = homedir();\n    return homeDirCache[homeDirCacheKey];\n};\n","import { readFile as fsReadFile } from \"node:fs/promises\";\nexport const filePromises = {};\nexport const fileIntercept = {};\nexport const readFile = (path, options) => {\n    if (fileIntercept[path] !== undefined) {\n        return fileIntercept[path];\n    }\n    if (!filePromises[path] || options?.ignoreCache) {\n        filePromises[path] = fsReadFile(path, \"utf8\");\n    }\n    return filePromises[path];\n};\n","export const ENV_PROFILE = \"AWS_PROFILE\";\nexport const DEFAULT_PROFILE = \"default\";\nexport const getProfileName = (init) => init.profile || process.env[ENV_PROFILE] || DEFAULT_PROFILE;\n","import { join } from \"path\";\nimport { getHomeDir } from \"./getHomeDir\";\nexport const ENV_CONFIG_PATH = \"AWS_CONFIG_FILE\";\nexport const getConfigFilepath = () => process.env[ENV_CONFIG_PATH] || join(getHomeDir(), \".aws\", \"config\");\n","export var IniSectionType;\n(function (IniSectionType) {\n    IniSectionType[\"PROFILE\"] = \"profile\";\n    IniSectionType[\"SSO_SESSION\"] = \"sso-session\";\n    IniSectionType[\"SERVICES\"] = \"services\";\n})(IniSectionType || (IniSectionType = {}));\n","export const CONFIG_PREFIX_SEPARATOR = \".\";\n","import { IniSectionType } from \"@smithy/types\";\nimport { CONFIG_PREFIX_SEPARATOR } from \"./constants\";\nconst prefixKeyRegex = /^([\\w-]+)\\s([\"'])?([\\w-@\\+\\.%:/]+)\\2$/;\nconst profileNameBlockList = [\"__proto__\", \"profile __proto__\"];\nexport const parseIni = (iniData) => {\n    const map = {};\n    let currentSection;\n    let currentSubSection;\n    for (const iniLine of iniData.split(/\\r?\\n/)) {\n        const trimmedLine = iniLine.split(/(^|\\s)[;#]/)[0].trim();\n        const isSection = trimmedLine[0] === \"[\" && trimmedLine[trimmedLine.length - 1] === \"]\";\n        if (isSection) {\n            currentSection = undefined;\n            currentSubSection = undefined;\n            const sectionName = trimmedLine.substring(1, trimmedLine.length - 1);\n            const matches = prefixKeyRegex.exec(sectionName);\n            if (matches) {\n                const [, prefix, , name] = matches;\n                if (Object.values(IniSectionType).includes(prefix)) {\n                    currentSection = [prefix, name].join(CONFIG_PREFIX_SEPARATOR);\n                }\n            }\n            else {\n                currentSection = sectionName;\n            }\n            if (profileNameBlockList.includes(sectionName)) {\n                throw new Error(`Found invalid profile name \"${sectionName}\"`);\n            }\n        }\n        else if (currentSection) {\n            const indexOfEqualsSign = trimmedLine.indexOf(\"=\");\n            if (![0, -1].includes(indexOfEqualsSign)) {\n                const [name, value] = [\n                    trimmedLine.substring(0, indexOfEqualsSign).trim(),\n                    trimmedLine.substring(indexOfEqualsSign + 1).trim(),\n                ];\n                if (value === \"\") {\n                    currentSubSection = name;\n                }\n                else {\n                    if (currentSubSection && iniLine.trimStart() === iniLine) {\n                        currentSubSection = undefined;\n                    }\n                    map[currentSection] = map[currentSection] || {};\n                    const key = currentSubSection ? [currentSubSection, name].join(CONFIG_PREFIX_SEPARATOR) : name;\n                    map[currentSection][key] = value;\n                }\n            }\n        }\n    }\n    return map;\n};\n","import { IniSectionType } from \"@smithy/types\";\nimport { CONFIG_PREFIX_SEPARATOR } from \"./constants\";\nexport const getConfigData = (data) => Object.entries(data)\n    .filter(([key]) => {\n    const indexOfSeparator = key.indexOf(CONFIG_PREFIX_SEPARATOR);\n    if (indexOfSeparator === -1) {\n        return false;\n    }\n    return Object.values(IniSectionType).includes(key.substring(0, indexOfSeparator));\n})\n    .reduce((acc, [key, value]) => {\n    const indexOfSeparator = key.indexOf(CONFIG_PREFIX_SEPARATOR);\n    const updatedKey = key.substring(0, indexOfSeparator) === IniSectionType.PROFILE ? key.substring(indexOfSeparator + 1) : key;\n    acc[updatedKey] = value;\n    return acc;\n}, {\n    ...(data.default && { default: data.default }),\n});\n","import { join } from \"path\";\nimport { getHomeDir } from \"./getHomeDir\";\nexport const ENV_CREDENTIALS_PATH = \"AWS_SHARED_CREDENTIALS_FILE\";\nexport const getCredentialsFilepath = () => process.env[ENV_CREDENTIALS_PATH] || join(getHomeDir(), \".aws\", \"credentials\");\n","import { join } from \"path\";\nimport { getConfigData } from \"./getConfigData\";\nimport { getConfigFilepath } from \"./getConfigFilepath\";\nimport { getCredentialsFilepath } from \"./getCredentialsFilepath\";\nimport { getHomeDir } from \"./getHomeDir\";\nimport { parseIni } from \"./parseIni\";\nimport { readFile } from \"./readFile\";\nconst swallowError = () => ({});\nexport { CONFIG_PREFIX_SEPARATOR } from \"./constants\";\nexport const loadSharedConfigFiles = async (init = {}) => {\n    const { filepath = getCredentialsFilepath(), configFilepath = getConfigFilepath() } = init;\n    const homeDir = getHomeDir();\n    const relativeHomeDirPrefix = \"~/\";\n    let resolvedFilepath = filepath;\n    if (filepath.startsWith(relativeHomeDirPrefix)) {\n        resolvedFilepath = join(homeDir, filepath.slice(2));\n    }\n    let resolvedConfigFilepath = configFilepath;\n    if (configFilepath.startsWith(relativeHomeDirPrefix)) {\n        resolvedConfigFilepath = join(homeDir, configFilepath.slice(2));\n    }\n    const parsedFiles = await Promise.all([\n        readFile(resolvedConfigFilepath, {\n            ignoreCache: init.ignoreCache,\n        })\n            .then(parseIni)\n            .then(getConfigData)\n            .catch(swallowError),\n        readFile(resolvedFilepath, {\n            ignoreCache: init.ignoreCache,\n        })\n            .then(parseIni)\n            .catch(swallowError),\n    ]);\n    return {\n        configFile: parsedFiles[0],\n        credentialsFile: parsedFiles[1],\n    };\n};\n","import { loadSharedConfigFiles } from \"./loadSharedConfigFiles\";\nimport { mergeConfigFiles } from \"./mergeConfigFiles\";\nexport const parseKnownFiles = async (init) => {\n    const parsedFiles = await loadSharedConfigFiles(init);\n    return mergeConfigFiles(parsedFiles.configFile, parsedFiles.credentialsFile);\n};\n","export const mergeConfigFiles = (...files) => {\n    const merged = {};\n    for (const file of files) {\n        for (const [key, values] of Object.entries(file)) {\n            if (merged[key] !== undefined) {\n                Object.assign(merged[key], values);\n            }\n            else {\n                merged[key] = values;\n            }\n        }\n    }\n    return merged;\n};\n","import { readFile } from \"fs/promises\";\nimport { getSSOTokenFilepath } from \"./getSSOTokenFilepath\";\nexport const tokenIntercept = {};\nexport const getSSOTokenFromFile = async (id) => {\n    if (tokenIntercept[id]) {\n        return tokenIntercept[id];\n    }\n    const ssoTokenFilepath = getSSOTokenFilepath(id);\n    const ssoTokenText = await readFile(ssoTokenFilepath, \"utf8\");\n    return JSON.parse(ssoTokenText);\n};\n","import { createHash } from \"crypto\";\nimport { join } from \"path\";\nimport { getHomeDir } from \"./getHomeDir\";\nexport const getSSOTokenFilepath = (id) => {\n    const hasher = createHash(\"sha1\");\n    const cacheName = hasher.update(id).digest(\"hex\");\n    return join(getHomeDir(), \".aws\", \"sso\", \"cache\", `${cacheName}.json`);\n};\n","import { CredentialsProviderError } from \"@smithy/property-provider\";\nimport { getProfileName, loadSsoSessionData, parseKnownFiles } from \"@smithy/shared-ini-file-loader\";\nimport { isSsoProfile } from \"./isSsoProfile\";\nimport { resolveSSOCredentials } from \"./resolveSSOCredentials\";\nimport { validateSsoProfile } from \"./validateSsoProfile\";\nexport const fromSSO = (init = {}) => async ({ callerClientConfig } = {}) => {\n    init.logger?.debug(\"@aws-sdk/credential-provider-sso - fromSSO\");\n    const { ssoStartUrl, ssoAccountId, ssoRegion, ssoRoleName, ssoSession } = init;\n    const { ssoClient } = init;\n    const profileName = getProfileName({\n        profile: init.profile ?? callerClientConfig?.profile,\n    });\n    if (!ssoStartUrl && !ssoAccountId && !ssoRegion && !ssoRoleName && !ssoSession) {\n        const profiles = await parseKnownFiles(init);\n        const profile = profiles[profileName];\n        if (!profile) {\n            throw new CredentialsProviderError(`Profile ${profileName} was not found.`, { logger: init.logger });\n        }\n        if (!isSsoProfile(profile)) {\n            throw new CredentialsProviderError(`Profile ${profileName} is not configured with SSO credentials.`, {\n                logger: init.logger,\n            });\n        }\n        if (profile?.sso_session) {\n            const ssoSessions = await loadSsoSessionData(init);\n            const session = ssoSessions[profile.sso_session];\n            const conflictMsg = ` configurations in profile ${profileName} and sso-session ${profile.sso_session}`;\n            if (ssoRegion && ssoRegion !== session.sso_region) {\n                throw new CredentialsProviderError(`Conflicting SSO region` + conflictMsg, {\n                    tryNextLink: false,\n                    logger: init.logger,\n                });\n            }\n            if (ssoStartUrl && ssoStartUrl !== session.sso_start_url) {\n                throw new CredentialsProviderError(`Conflicting SSO start_url` + conflictMsg, {\n                    tryNextLink: false,\n                    logger: init.logger,\n                });\n            }\n            profile.sso_region = session.sso_region;\n            profile.sso_start_url = session.sso_start_url;\n        }\n        const { sso_start_url, sso_account_id, sso_region, sso_role_name, sso_session } = validateSsoProfile(profile, init.logger);\n        return resolveSSOCredentials({\n            ssoStartUrl: sso_start_url,\n            ssoSession: sso_session,\n            ssoAccountId: sso_account_id,\n            ssoRegion: sso_region,\n            ssoRoleName: sso_role_name,\n            ssoClient: ssoClient,\n            clientConfig: init.clientConfig,\n            parentClientConfig: init.parentClientConfig,\n            callerClientConfig: init.callerClientConfig,\n            profile: profileName,\n            filepath: init.filepath,\n            configFilepath: init.configFilepath,\n            ignoreCache: init.ignoreCache,\n            logger: init.logger,\n        });\n    }\n    else if (!ssoStartUrl || !ssoAccountId || !ssoRegion || !ssoRoleName) {\n        throw new CredentialsProviderError(\"Incomplete configuration. The fromSSO() argument hash must include \" +\n            '\"ssoStartUrl\", \"ssoAccountId\", \"ssoRegion\", \"ssoRoleName\"', { tryNextLink: false, logger: init.logger });\n    }\n    else {\n        return resolveSSOCredentials({\n            ssoStartUrl,\n            ssoSession,\n            ssoAccountId,\n            ssoRegion,\n            ssoRoleName,\n            ssoClient,\n            clientConfig: init.clientConfig,\n            parentClientConfig: init.parentClientConfig,\n            callerClientConfig: init.callerClientConfig,\n            profile: profileName,\n            filepath: init.filepath,\n            configFilepath: init.configFilepath,\n            ignoreCache: init.ignoreCache,\n            logger: init.logger,\n        });\n    }\n};\n","import { getConfigFilepath } from \"./getConfigFilepath\";\nimport { getSsoSessionData } from \"./getSsoSessionData\";\nimport { parseIni } from \"./parseIni\";\nimport { readFile } from \"./readFile\";\nconst swallowError = () => ({});\nexport const loadSsoSessionData = async (init = {}) => readFile(init.configFilepath ?? getConfigFilepath())\n    .then(parseIni)\n    .then(getSsoSessionData)\n    .catch(swallowError);\n","import { IniSectionType } from \"@smithy/types\";\nimport { CONFIG_PREFIX_SEPARATOR } from \"./loadSharedConfigFiles\";\nexport const getSsoSessionData = (data) => Object.entries(data)\n    .filter(([key]) => key.startsWith(IniSectionType.SSO_SESSION + CONFIG_PREFIX_SEPARATOR))\n    .reduce((acc, [key, value]) => ({ ...acc, [key.substring(key.indexOf(CONFIG_PREFIX_SEPARATOR) + 1)]: value }), {});\n","export const isSsoProfile = (arg) => arg &&\n    (typeof arg.sso_start_url === \"string\" ||\n        typeof arg.sso_account_id === \"string\" ||\n        typeof arg.sso_session === \"string\" ||\n        typeof arg.sso_region === \"string\" ||\n        typeof arg.sso_role_name === \"string\");\n","import { setCredentialFeature } from \"@aws-sdk/core/client\";\nimport { fromSso as getSsoTokenProvider } from \"@aws-sdk/token-providers\";\nimport { CredentialsProviderError } from \"@smithy/property-provider\";\nimport { getSSOTokenFromFile } from \"@smithy/shared-ini-file-loader\";\nconst SHOULD_FAIL_CREDENTIAL_CHAIN = false;\nexport const resolveSSOCredentials = async ({ ssoStartUrl, ssoSession, ssoAccountId, ssoRegion, ssoRoleName, ssoClient, clientConfig, parentClientConfig, callerClientConfig, profile, filepath, configFilepath, ignoreCache, logger, }) => {\n    let token;\n    const refreshMessage = `To refresh this SSO session run aws sso login with the corresponding profile.`;\n    if (ssoSession) {\n        try {\n            const _token = await getSsoTokenProvider({\n                profile,\n                filepath,\n                configFilepath,\n                ignoreCache,\n            })();\n            token = {\n                accessToken: _token.token,\n                expiresAt: new Date(_token.expiration).toISOString(),\n            };\n        }\n        catch (e) {\n            throw new CredentialsProviderError(e.message, {\n                tryNextLink: SHOULD_FAIL_CREDENTIAL_CHAIN,\n                logger,\n            });\n        }\n    }\n    else {\n        try {\n            token = await getSSOTokenFromFile(ssoStartUrl);\n        }\n        catch (e) {\n            throw new CredentialsProviderError(`The SSO session associated with this profile is invalid. ${refreshMessage}`, {\n                tryNextLink: SHOULD_FAIL_CREDENTIAL_CHAIN,\n                logger,\n            });\n        }\n    }\n    if (new Date(token.expiresAt).getTime() - Date.now() <= 0) {\n        throw new CredentialsProviderError(`The SSO session associated with this profile has expired. ${refreshMessage}`, {\n            tryNextLink: SHOULD_FAIL_CREDENTIAL_CHAIN,\n            logger,\n        });\n    }\n    const { accessToken } = token;\n    const { SSOClient, GetRoleCredentialsCommand } = await import(\"./loadSso\");\n    const sso = ssoClient ||\n        new SSOClient(Object.assign({}, clientConfig ?? {}, {\n            logger: clientConfig?.logger ?? callerClientConfig?.logger ?? parentClientConfig?.logger,\n            region: clientConfig?.region ?? ssoRegion,\n            userAgentAppId: clientConfig?.userAgentAppId ?? callerClientConfig?.userAgentAppId ?? parentClientConfig?.userAgentAppId,\n        }));\n    let ssoResp;\n    try {\n        ssoResp = await sso.send(new GetRoleCredentialsCommand({\n            accountId: ssoAccountId,\n            roleName: ssoRoleName,\n            accessToken,\n        }));\n    }\n    catch (e) {\n        throw new CredentialsProviderError(e, {\n            tryNextLink: SHOULD_FAIL_CREDENTIAL_CHAIN,\n            logger,\n        });\n    }\n    const { roleCredentials: { accessKeyId, secretAccessKey, sessionToken, expiration, credentialScope, accountId } = {}, } = ssoResp;\n    if (!accessKeyId || !secretAccessKey || !sessionToken || !expiration) {\n        throw new CredentialsProviderError(\"SSO returns an invalid temporary credential.\", {\n            tryNextLink: SHOULD_FAIL_CREDENTIAL_CHAIN,\n            logger,\n        });\n    }\n    const credentials = {\n        accessKeyId,\n        secretAccessKey,\n        sessionToken,\n        expiration: new Date(expiration),\n        ...(credentialScope && { credentialScope }),\n        ...(accountId && { accountId }),\n    };\n    if (ssoSession) {\n        setCredentialFeature(credentials, \"CREDENTIALS_SSO\", \"s\");\n    }\n    else {\n        setCredentialFeature(credentials, \"CREDENTIALS_SSO_LEGACY\", \"u\");\n    }\n    return credentials;\n};\n","import { ProviderError } from \"./ProviderError\";\nexport class TokenProviderError extends ProviderError {\n    name = \"TokenProviderError\";\n    constructor(message, options = true) {\n        super(message, options);\n        Object.setPrototypeOf(this, TokenProviderError.prototype);\n    }\n}\n","import { TokenProviderError } from \"@smithy/property-provider\";\nimport { getProfileName, getSSOTokenFromFile, loadSsoSessionData, parseKnownFiles, } from \"@smithy/shared-ini-file-loader\";\nimport { EXPIRE_WINDOW_MS, REFRESH_MESSAGE } from \"./constants\";\nimport { getNewSsoOidcToken } from \"./getNewSsoOidcToken\";\nimport { validateTokenExpiry } from \"./validateTokenExpiry\";\nimport { validateTokenKey } from \"./validateTokenKey\";\nimport { writeSSOTokenToFile } from \"./writeSSOTokenToFile\";\nconst lastRefreshAttemptTime = new Date(0);\nexport const fromSso = (init = {}) => async ({ callerClientConfig } = {}) => {\n    init.logger?.debug(\"@aws-sdk/token-providers - fromSso\");\n    const profiles = await parseKnownFiles(init);\n    const profileName = getProfileName({\n        profile: init.profile ?? callerClientConfig?.profile,\n    });\n    const profile = profiles[profileName];\n    if (!profile) {\n        throw new TokenProviderError(`Profile '${profileName}' could not be found in shared credentials file.`, false);\n    }\n    else if (!profile[\"sso_session\"]) {\n        throw new TokenProviderError(`Profile '${profileName}' is missing required property 'sso_session'.`);\n    }\n    const ssoSessionName = profile[\"sso_session\"];\n    const ssoSessions = await loadSsoSessionData(init);\n    const ssoSession = ssoSessions[ssoSessionName];\n    if (!ssoSession) {\n        throw new TokenProviderError(`Sso session '${ssoSessionName}' could not be found in shared credentials file.`, false);\n    }\n    for (const ssoSessionRequiredKey of [\"sso_start_url\", \"sso_region\"]) {\n        if (!ssoSession[ssoSessionRequiredKey]) {\n            throw new TokenProviderError(`Sso session '${ssoSessionName}' is missing required property '${ssoSessionRequiredKey}'.`, false);\n        }\n    }\n    const ssoStartUrl = ssoSession[\"sso_start_url\"];\n    const ssoRegion = ssoSession[\"sso_region\"];\n    let ssoToken;\n    try {\n        ssoToken = await getSSOTokenFromFile(ssoSessionName);\n    }\n    catch (e) {\n        throw new TokenProviderError(`The SSO session token associated with profile=${profileName} was not found or is invalid. ${REFRESH_MESSAGE}`, false);\n    }\n    validateTokenKey(\"accessToken\", ssoToken.accessToken);\n    validateTokenKey(\"expiresAt\", ssoToken.expiresAt);\n    const { accessToken, expiresAt } = ssoToken;\n    const existingToken = { token: accessToken, expiration: new Date(expiresAt) };\n    if (existingToken.expiration.getTime() - Date.now() > EXPIRE_WINDOW_MS) {\n        return existingToken;\n    }\n    if (Date.now() - lastRefreshAttemptTime.getTime() < 30 * 1000) {\n        validateTokenExpiry(existingToken);\n        return existingToken;\n    }\n    validateTokenKey(\"clientId\", ssoToken.clientId, true);\n    validateTokenKey(\"clientSecret\", ssoToken.clientSecret, true);\n    validateTokenKey(\"refreshToken\", ssoToken.refreshToken, true);\n    try {\n        lastRefreshAttemptTime.setTime(Date.now());\n        const newSsoOidcToken = await getNewSsoOidcToken(ssoToken, ssoRegion, init, callerClientConfig);\n        validateTokenKey(\"accessToken\", newSsoOidcToken.accessToken);\n        validateTokenKey(\"expiresIn\", newSsoOidcToken.expiresIn);\n        const newTokenExpiration = new Date(Date.now() + newSsoOidcToken.expiresIn * 1000);\n        try {\n            await writeSSOTokenToFile(ssoSessionName, {\n                ...ssoToken,\n                accessToken: newSsoOidcToken.accessToken,\n                expiresAt: newTokenExpiration.toISOString(),\n                refreshToken: newSsoOidcToken.refreshToken,\n            });\n        }\n        catch (error) {\n        }\n        return {\n            token: newSsoOidcToken.accessToken,\n            expiration: newTokenExpiration,\n        };\n    }\n    catch (error) {\n        validateTokenExpiry(existingToken);\n        return existingToken;\n    }\n};\n","export const EXPIRE_WINDOW_MS = 5 * 60 * 1000;\nexport const REFRESH_MESSAGE = `To refresh this SSO session run 'aws sso login' with the corresponding profile.`;\n","export const getSsoOidcClient = async (ssoRegion, init = {}, callerClientConfig) => {\n    const { SSOOIDCClient } = await import(\"@aws-sdk/nested-clients/sso-oidc\");\n    const coalesce = (prop) => init.clientConfig?.[prop] ?? init.parentClientConfig?.[prop] ?? callerClientConfig?.[prop];\n    const ssoOidcClient = new SSOOIDCClient(Object.assign({}, init.clientConfig ?? {}, {\n        region: ssoRegion ?? init.clientConfig?.region,\n        logger: coalesce(\"logger\"),\n        userAgentAppId: coalesce(\"userAgentAppId\"),\n    }));\n    return ssoOidcClient;\n};\n","import { getSsoOidcClient } from \"./getSsoOidcClient\";\nexport const getNewSsoOidcToken = async (ssoToken, ssoRegion, init = {}, callerClientConfig) => {\n    const { CreateTokenCommand } = await import(\"@aws-sdk/nested-clients/sso-oidc\");\n    const ssoOidcClient = await getSsoOidcClient(ssoRegion, init, callerClientConfig);\n    return ssoOidcClient.send(new CreateTokenCommand({\n        clientId: ssoToken.clientId,\n        clientSecret: ssoToken.clientSecret,\n        refreshToken: ssoToken.refreshToken,\n        grantType: \"refresh_token\",\n    }));\n};\n","import { TokenProviderError } from \"@smithy/property-provider\";\nimport { REFRESH_MESSAGE } from \"./constants\";\nexport const validateTokenExpiry = (token) => {\n    if (token.expiration && token.expiration.getTime() < Date.now()) {\n        throw new TokenProviderError(`Token is expired. ${REFRESH_MESSAGE}`, false);\n    }\n};\n","import { TokenProviderError } from \"@smithy/property-provider\";\nimport { REFRESH_MESSAGE } from \"./constants\";\nexport const validateTokenKey = (key, value, forRefresh = false) => {\n    if (typeof value === \"undefined\") {\n        throw new TokenProviderError(`Value not present for '${key}' in SSO Token${forRefresh ? \". Cannot refresh\" : \"\"}. ${REFRESH_MESSAGE}`, false);\n    }\n};\n","import { getSSOTokenFilepath } from \"@smithy/shared-ini-file-loader\";\nimport { promises as fsPromises } from \"fs\";\nconst { writeFile } = fsPromises;\nexport const writeSSOTokenToFile = (id, ssoToken) => {\n    const tokenFilepath = getSSOTokenFilepath(id);\n    const tokenString = JSON.stringify(ssoToken, null, 2);\n    return writeFile(tokenFilepath, tokenString);\n};\n","import { CredentialsProviderError } from \"@smithy/property-provider\";\nexport const validateSsoProfile = (profile, logger) => {\n    const { sso_start_url, sso_account_id, sso_region, sso_role_name } = profile;\n    if (!sso_start_url || !sso_account_id || !sso_region || !sso_role_name) {\n        throw new CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters \"sso_account_id\", ` +\n            `\"sso_region\", \"sso_role_name\", \"sso_start_url\". Got ${Object.keys(profile).join(\", \")}\\nReference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`, { tryNextLink: false, logger });\n    }\n    return profile;\n};\n"],"names":[],"mappings":"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","ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]}