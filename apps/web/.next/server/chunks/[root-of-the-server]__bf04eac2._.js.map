{"version":3,"sources":["../../../../../node_modules/%40smithy/node-config-provider/dist-es/configLoader.js","../../../../../node_modules/%40smithy/property-provider/dist-es/memoize.js","../../../../../node_modules/%40smithy/node-config-provider/dist-es/fromEnv.js","../../../../../node_modules/%40smithy/node-config-provider/dist-es/getSelectorName.js","../../../../../node_modules/%40smithy/node-config-provider/dist-es/fromSharedConfigFiles.js","../../../../../node_modules/%40smithy/property-provider/dist-es/fromStatic.js","../../../../../node_modules/%40smithy/node-config-provider/dist-es/fromStatic.js","../../../../../node_modules/%40smithy/querystring-parser/dist-es/index.js","../../../../../node_modules/%40smithy/url-parser/dist-es/index.js","../../../../../node_modules/%40smithy/property-provider/dist-es/ProviderError.js","../../../../../node_modules/%40smithy/property-provider/dist-es/CredentialsProviderError.js","../../../../../node_modules/%40smithy/shared-ini-file-loader/dist-es/getHomeDir.js","../../../../../node_modules/%40smithy/shared-ini-file-loader/dist-es/readFile.js","../../../../../node_modules/%40smithy/shared-ini-file-loader/dist-es/getProfileName.js","../../../../../node_modules/%40smithy/types/dist-es/profile.js","../../../../../node_modules/%40smithy/shared-ini-file-loader/dist-es/constants.js","../../../../../node_modules/%40smithy/shared-ini-file-loader/dist-es/getConfigData.js","../../../../../node_modules/%40smithy/shared-ini-file-loader/dist-es/getConfigFilepath.js","../../../../../node_modules/%40smithy/shared-ini-file-loader/dist-es/getCredentialsFilepath.js","../../../../../node_modules/%40smithy/shared-ini-file-loader/dist-es/parseIni.js","../../../../../node_modules/%40smithy/shared-ini-file-loader/dist-es/loadSharedConfigFiles.js","../../../../../node_modules/%40smithy/property-provider/dist-es/chain.js","../../../../../node_modules/%40smithy/credential-provider-imds/dist-es/fromContainerMetadata.js","../../../../../node_modules/%40smithy/credential-provider-imds/dist-es/remoteProvider/httpRequest.js","../../../../../node_modules/%40smithy/credential-provider-imds/dist-es/remoteProvider/ImdsCredentials.js","../../../../../node_modules/%40smithy/credential-provider-imds/dist-es/remoteProvider/RemoteProviderInit.js","../../../../../node_modules/%40smithy/credential-provider-imds/dist-es/remoteProvider/retry.js","../../../../../node_modules/%40smithy/credential-provider-imds/dist-es/fromInstanceMetadata.js","../../../../../node_modules/%40smithy/credential-provider-imds/dist-es/error/InstanceMetadataV1FallbackError.js","../../../../../node_modules/%40smithy/credential-provider-imds/dist-es/utils/getInstanceMetadataEndpoint.js","../../../../../node_modules/%40smithy/credential-provider-imds/dist-es/config/Endpoint.js","../../../../../node_modules/%40smithy/credential-provider-imds/dist-es/config/EndpointConfigOptions.js","../../../../../node_modules/%40smithy/credential-provider-imds/dist-es/config/EndpointMode.js","../../../../../node_modules/%40smithy/credential-provider-imds/dist-es/config/EndpointModeConfigOptions.js","../../../../../node_modules/%40smithy/credential-provider-imds/dist-es/utils/getExtendedInstanceMetadataCredentials.js","../../../../../node_modules/%40smithy/credential-provider-imds/dist-es/utils/staticStabilityProvider.js"],"sourcesContent":["import { chain, memoize } from \"@smithy/property-provider\";\nimport { fromEnv } from \"./fromEnv\";\nimport { fromSharedConfigFiles } from \"./fromSharedConfigFiles\";\nimport { fromStatic } from \"./fromStatic\";\nexport const loadConfig = ({ environmentVariableSelector, configFileSelector, default: defaultValue }, configuration = {}) => {\n    const { signingName, logger } = configuration;\n    const envOptions = { signingName, logger };\n    return memoize(chain(fromEnv(environmentVariableSelector, envOptions), fromSharedConfigFiles(configFileSelector, configuration), fromStatic(defaultValue)));\n};\n","export const memoize = (provider, isExpired, requiresRefresh) => {\n    let resolved;\n    let pending;\n    let hasResult;\n    let isConstant = false;\n    const coalesceProvider = async () => {\n        if (!pending) {\n            pending = provider();\n        }\n        try {\n            resolved = await pending;\n            hasResult = true;\n            isConstant = false;\n        }\n        finally {\n            pending = undefined;\n        }\n        return resolved;\n    };\n    if (isExpired === undefined) {\n        return async (options) => {\n            if (!hasResult || options?.forceRefresh) {\n                resolved = await coalesceProvider();\n            }\n            return resolved;\n        };\n    }\n    return async (options) => {\n        if (!hasResult || options?.forceRefresh) {\n            resolved = await coalesceProvider();\n        }\n        if (isConstant) {\n            return resolved;\n        }\n        if (requiresRefresh && !requiresRefresh(resolved)) {\n            isConstant = true;\n            return resolved;\n        }\n        if (isExpired(resolved)) {\n            await coalesceProvider();\n            return resolved;\n        }\n        return resolved;\n    };\n};\n","import { CredentialsProviderError } from \"@smithy/property-provider\";\nimport { getSelectorName } from \"./getSelectorName\";\nexport const fromEnv = (envVarSelector, options) => async () => {\n    try {\n        const config = envVarSelector(process.env, options);\n        if (config === undefined) {\n            throw new Error();\n        }\n        return config;\n    }\n    catch (e) {\n        throw new CredentialsProviderError(e.message || `Not found in ENV: ${getSelectorName(envVarSelector.toString())}`, { logger: options?.logger });\n    }\n};\n","export function getSelectorName(functionString) {\n    try {\n        const constants = new Set(Array.from(functionString.match(/([A-Z_]){3,}/g) ?? []));\n        constants.delete(\"CONFIG\");\n        constants.delete(\"CONFIG_PREFIX_SEPARATOR\");\n        constants.delete(\"ENV\");\n        return [...constants].join(\", \");\n    }\n    catch (e) {\n        return functionString;\n    }\n}\n","import { CredentialsProviderError } from \"@smithy/property-provider\";\nimport { getProfileName, loadSharedConfigFiles } from \"@smithy/shared-ini-file-loader\";\nimport { getSelectorName } from \"./getSelectorName\";\nexport const fromSharedConfigFiles = (configSelector, { preferredFile = \"config\", ...init } = {}) => async () => {\n    const profile = getProfileName(init);\n    const { configFile, credentialsFile } = await loadSharedConfigFiles(init);\n    const profileFromCredentials = credentialsFile[profile] || {};\n    const profileFromConfig = configFile[profile] || {};\n    const mergedProfile = preferredFile === \"config\"\n        ? { ...profileFromCredentials, ...profileFromConfig }\n        : { ...profileFromConfig, ...profileFromCredentials };\n    try {\n        const cfgFile = preferredFile === \"config\" ? configFile : credentialsFile;\n        const configValue = configSelector(mergedProfile, cfgFile);\n        if (configValue === undefined) {\n            throw new Error();\n        }\n        return configValue;\n    }\n    catch (e) {\n        throw new CredentialsProviderError(e.message || `Not found in config files w/ profile [${profile}]: ${getSelectorName(configSelector.toString())}`, { logger: init.logger });\n    }\n};\n","export const fromStatic = (staticValue) => () => Promise.resolve(staticValue);\n","import { fromStatic as convertToProvider } from \"@smithy/property-provider\";\nconst isFunction = (func) => typeof func === \"function\";\nexport const fromStatic = (defaultValue) => isFunction(defaultValue) ? async () => await defaultValue() : convertToProvider(defaultValue);\n","export function parseQueryString(querystring) {\n    const query = {};\n    querystring = querystring.replace(/^\\?/, \"\");\n    if (querystring) {\n        for (const pair of querystring.split(\"&\")) {\n            let [key, value = null] = pair.split(\"=\");\n            key = decodeURIComponent(key);\n            if (value) {\n                value = decodeURIComponent(value);\n            }\n            if (!(key in query)) {\n                query[key] = value;\n            }\n            else if (Array.isArray(query[key])) {\n                query[key].push(value);\n            }\n            else {\n                query[key] = [query[key], value];\n            }\n        }\n    }\n    return query;\n}\n","import { parseQueryString } from \"@smithy/querystring-parser\";\nexport const parseUrl = (url) => {\n    if (typeof url === \"string\") {\n        return parseUrl(new URL(url));\n    }\n    const { hostname, pathname, port, protocol, search } = url;\n    let query;\n    if (search) {\n        query = parseQueryString(search);\n    }\n    return {\n        hostname,\n        port: port ? parseInt(port) : undefined,\n        protocol,\n        path: pathname,\n        query,\n    };\n};\n","export class ProviderError extends Error {\n    name = \"ProviderError\";\n    tryNextLink;\n    constructor(message, options = true) {\n        let logger;\n        let tryNextLink = true;\n        if (typeof options === \"boolean\") {\n            logger = undefined;\n            tryNextLink = options;\n        }\n        else if (options != null && typeof options === \"object\") {\n            logger = options.logger;\n            tryNextLink = options.tryNextLink ?? true;\n        }\n        super(message);\n        this.tryNextLink = tryNextLink;\n        Object.setPrototypeOf(this, ProviderError.prototype);\n        logger?.debug?.(`@smithy/property-provider ${tryNextLink ? \"->\" : \"(!)\"} ${message}`);\n    }\n    static from(error, options = true) {\n        return Object.assign(new this(error.message, options), error);\n    }\n}\n","import { ProviderError } from \"./ProviderError\";\nexport class CredentialsProviderError extends ProviderError {\n    name = \"CredentialsProviderError\";\n    constructor(message, options = true) {\n        super(message, options);\n        Object.setPrototypeOf(this, CredentialsProviderError.prototype);\n    }\n}\n","import { homedir } from \"os\";\nimport { sep } from \"path\";\nconst homeDirCache = {};\nconst getHomeDirCacheKey = () => {\n    if (process && process.geteuid) {\n        return `${process.geteuid()}`;\n    }\n    return \"DEFAULT\";\n};\nexport const getHomeDir = () => {\n    const { HOME, USERPROFILE, HOMEPATH, HOMEDRIVE = `C:${sep}` } = process.env;\n    if (HOME)\n        return HOME;\n    if (USERPROFILE)\n        return USERPROFILE;\n    if (HOMEPATH)\n        return `${HOMEDRIVE}${HOMEPATH}`;\n    const homeDirCacheKey = getHomeDirCacheKey();\n    if (!homeDirCache[homeDirCacheKey])\n        homeDirCache[homeDirCacheKey] = homedir();\n    return homeDirCache[homeDirCacheKey];\n};\n","import { readFile as fsReadFile } from \"node:fs/promises\";\nexport const filePromises = {};\nexport const fileIntercept = {};\nexport const readFile = (path, options) => {\n    if (fileIntercept[path] !== undefined) {\n        return fileIntercept[path];\n    }\n    if (!filePromises[path] || options?.ignoreCache) {\n        filePromises[path] = fsReadFile(path, \"utf8\");\n    }\n    return filePromises[path];\n};\n","export const ENV_PROFILE = \"AWS_PROFILE\";\nexport const DEFAULT_PROFILE = \"default\";\nexport const getProfileName = (init) => init.profile || process.env[ENV_PROFILE] || DEFAULT_PROFILE;\n","export var IniSectionType;\n(function (IniSectionType) {\n    IniSectionType[\"PROFILE\"] = \"profile\";\n    IniSectionType[\"SSO_SESSION\"] = \"sso-session\";\n    IniSectionType[\"SERVICES\"] = \"services\";\n})(IniSectionType || (IniSectionType = {}));\n","export const CONFIG_PREFIX_SEPARATOR = \".\";\n","import { IniSectionType } from \"@smithy/types\";\nimport { CONFIG_PREFIX_SEPARATOR } from \"./constants\";\nexport const getConfigData = (data) => Object.entries(data)\n    .filter(([key]) => {\n    const indexOfSeparator = key.indexOf(CONFIG_PREFIX_SEPARATOR);\n    if (indexOfSeparator === -1) {\n        return false;\n    }\n    return Object.values(IniSectionType).includes(key.substring(0, indexOfSeparator));\n})\n    .reduce((acc, [key, value]) => {\n    const indexOfSeparator = key.indexOf(CONFIG_PREFIX_SEPARATOR);\n    const updatedKey = key.substring(0, indexOfSeparator) === IniSectionType.PROFILE ? key.substring(indexOfSeparator + 1) : key;\n    acc[updatedKey] = value;\n    return acc;\n}, {\n    ...(data.default && { default: data.default }),\n});\n","import { join } from \"path\";\nimport { getHomeDir } from \"./getHomeDir\";\nexport const ENV_CONFIG_PATH = \"AWS_CONFIG_FILE\";\nexport const getConfigFilepath = () => process.env[ENV_CONFIG_PATH] || join(getHomeDir(), \".aws\", \"config\");\n","import { join } from \"path\";\nimport { getHomeDir } from \"./getHomeDir\";\nexport const ENV_CREDENTIALS_PATH = \"AWS_SHARED_CREDENTIALS_FILE\";\nexport const getCredentialsFilepath = () => process.env[ENV_CREDENTIALS_PATH] || join(getHomeDir(), \".aws\", \"credentials\");\n","import { IniSectionType } from \"@smithy/types\";\nimport { CONFIG_PREFIX_SEPARATOR } from \"./constants\";\nconst prefixKeyRegex = /^([\\w-]+)\\s([\"'])?([\\w-@\\+\\.%:/]+)\\2$/;\nconst profileNameBlockList = [\"__proto__\", \"profile __proto__\"];\nexport const parseIni = (iniData) => {\n    const map = {};\n    let currentSection;\n    let currentSubSection;\n    for (const iniLine of iniData.split(/\\r?\\n/)) {\n        const trimmedLine = iniLine.split(/(^|\\s)[;#]/)[0].trim();\n        const isSection = trimmedLine[0] === \"[\" && trimmedLine[trimmedLine.length - 1] === \"]\";\n        if (isSection) {\n            currentSection = undefined;\n            currentSubSection = undefined;\n            const sectionName = trimmedLine.substring(1, trimmedLine.length - 1);\n            const matches = prefixKeyRegex.exec(sectionName);\n            if (matches) {\n                const [, prefix, , name] = matches;\n                if (Object.values(IniSectionType).includes(prefix)) {\n                    currentSection = [prefix, name].join(CONFIG_PREFIX_SEPARATOR);\n                }\n            }\n            else {\n                currentSection = sectionName;\n            }\n            if (profileNameBlockList.includes(sectionName)) {\n                throw new Error(`Found invalid profile name \"${sectionName}\"`);\n            }\n        }\n        else if (currentSection) {\n            const indexOfEqualsSign = trimmedLine.indexOf(\"=\");\n            if (![0, -1].includes(indexOfEqualsSign)) {\n                const [name, value] = [\n                    trimmedLine.substring(0, indexOfEqualsSign).trim(),\n                    trimmedLine.substring(indexOfEqualsSign + 1).trim(),\n                ];\n                if (value === \"\") {\n                    currentSubSection = name;\n                }\n                else {\n                    if (currentSubSection && iniLine.trimStart() === iniLine) {\n                        currentSubSection = undefined;\n                    }\n                    map[currentSection] = map[currentSection] || {};\n                    const key = currentSubSection ? [currentSubSection, name].join(CONFIG_PREFIX_SEPARATOR) : name;\n                    map[currentSection][key] = value;\n                }\n            }\n        }\n    }\n    return map;\n};\n","import { join } from \"path\";\nimport { getConfigData } from \"./getConfigData\";\nimport { getConfigFilepath } from \"./getConfigFilepath\";\nimport { getCredentialsFilepath } from \"./getCredentialsFilepath\";\nimport { getHomeDir } from \"./getHomeDir\";\nimport { parseIni } from \"./parseIni\";\nimport { readFile } from \"./readFile\";\nconst swallowError = () => ({});\nexport { CONFIG_PREFIX_SEPARATOR } from \"./constants\";\nexport const loadSharedConfigFiles = async (init = {}) => {\n    const { filepath = getCredentialsFilepath(), configFilepath = getConfigFilepath() } = init;\n    const homeDir = getHomeDir();\n    const relativeHomeDirPrefix = \"~/\";\n    let resolvedFilepath = filepath;\n    if (filepath.startsWith(relativeHomeDirPrefix)) {\n        resolvedFilepath = join(homeDir, filepath.slice(2));\n    }\n    let resolvedConfigFilepath = configFilepath;\n    if (configFilepath.startsWith(relativeHomeDirPrefix)) {\n        resolvedConfigFilepath = join(homeDir, configFilepath.slice(2));\n    }\n    const parsedFiles = await Promise.all([\n        readFile(resolvedConfigFilepath, {\n            ignoreCache: init.ignoreCache,\n        })\n            .then(parseIni)\n            .then(getConfigData)\n            .catch(swallowError),\n        readFile(resolvedFilepath, {\n            ignoreCache: init.ignoreCache,\n        })\n            .then(parseIni)\n            .catch(swallowError),\n    ]);\n    return {\n        configFile: parsedFiles[0],\n        credentialsFile: parsedFiles[1],\n    };\n};\n","import { ProviderError } from \"./ProviderError\";\nexport const chain = (...providers) => async () => {\n    if (providers.length === 0) {\n        throw new ProviderError(\"No providers in chain\");\n    }\n    let lastProviderError;\n    for (const provider of providers) {\n        try {\n            const credentials = await provider();\n            return credentials;\n        }\n        catch (err) {\n            lastProviderError = err;\n            if (err?.tryNextLink) {\n                continue;\n            }\n            throw err;\n        }\n    }\n    throw lastProviderError;\n};\n","import { CredentialsProviderError } from \"@smithy/property-provider\";\nimport { parse } from \"url\";\nimport { httpRequest } from \"./remoteProvider/httpRequest\";\nimport { fromImdsCredentials, isImdsCredentials } from \"./remoteProvider/ImdsCredentials\";\nimport { providerConfigFromInit } from \"./remoteProvider/RemoteProviderInit\";\nimport { retry } from \"./remoteProvider/retry\";\nexport const ENV_CMDS_FULL_URI = \"AWS_CONTAINER_CREDENTIALS_FULL_URI\";\nexport const ENV_CMDS_RELATIVE_URI = \"AWS_CONTAINER_CREDENTIALS_RELATIVE_URI\";\nexport const ENV_CMDS_AUTH_TOKEN = \"AWS_CONTAINER_AUTHORIZATION_TOKEN\";\nexport const fromContainerMetadata = (init = {}) => {\n    const { timeout, maxRetries } = providerConfigFromInit(init);\n    return () => retry(async () => {\n        const requestOptions = await getCmdsUri({ logger: init.logger });\n        const credsResponse = JSON.parse(await requestFromEcsImds(timeout, requestOptions));\n        if (!isImdsCredentials(credsResponse)) {\n            throw new CredentialsProviderError(\"Invalid response received from instance metadata service.\", {\n                logger: init.logger,\n            });\n        }\n        return fromImdsCredentials(credsResponse);\n    }, maxRetries);\n};\nconst requestFromEcsImds = async (timeout, options) => {\n    if (process.env[ENV_CMDS_AUTH_TOKEN]) {\n        options.headers = {\n            ...options.headers,\n            Authorization: process.env[ENV_CMDS_AUTH_TOKEN],\n        };\n    }\n    const buffer = await httpRequest({\n        ...options,\n        timeout,\n    });\n    return buffer.toString();\n};\nconst CMDS_IP = \"169.254.170.2\";\nconst GREENGRASS_HOSTS = {\n    localhost: true,\n    \"127.0.0.1\": true,\n};\nconst GREENGRASS_PROTOCOLS = {\n    \"http:\": true,\n    \"https:\": true,\n};\nconst getCmdsUri = async ({ logger }) => {\n    if (process.env[ENV_CMDS_RELATIVE_URI]) {\n        return {\n            hostname: CMDS_IP,\n            path: process.env[ENV_CMDS_RELATIVE_URI],\n        };\n    }\n    if (process.env[ENV_CMDS_FULL_URI]) {\n        const parsed = parse(process.env[ENV_CMDS_FULL_URI]);\n        if (!parsed.hostname || !(parsed.hostname in GREENGRASS_HOSTS)) {\n            throw new CredentialsProviderError(`${parsed.hostname} is not a valid container metadata service hostname`, {\n                tryNextLink: false,\n                logger,\n            });\n        }\n        if (!parsed.protocol || !(parsed.protocol in GREENGRASS_PROTOCOLS)) {\n            throw new CredentialsProviderError(`${parsed.protocol} is not a valid container metadata service protocol`, {\n                tryNextLink: false,\n                logger,\n            });\n        }\n        return {\n            ...parsed,\n            port: parsed.port ? parseInt(parsed.port, 10) : undefined,\n        };\n    }\n    throw new CredentialsProviderError(\"The container metadata credential provider cannot be used unless\" +\n        ` the ${ENV_CMDS_RELATIVE_URI} or ${ENV_CMDS_FULL_URI} environment` +\n        \" variable is set\", {\n        tryNextLink: false,\n        logger,\n    });\n};\n","import { ProviderError } from \"@smithy/property-provider\";\nimport { Buffer } from \"buffer\";\nimport { request } from \"http\";\nexport function httpRequest(options) {\n    return new Promise((resolve, reject) => {\n        const req = request({\n            method: \"GET\",\n            ...options,\n            hostname: options.hostname?.replace(/^\\[(.+)\\]$/, \"$1\"),\n        });\n        req.on(\"error\", (err) => {\n            reject(Object.assign(new ProviderError(\"Unable to connect to instance metadata service\"), err));\n            req.destroy();\n        });\n        req.on(\"timeout\", () => {\n            reject(new ProviderError(\"TimeoutError from instance metadata service\"));\n            req.destroy();\n        });\n        req.on(\"response\", (res) => {\n            const { statusCode = 400 } = res;\n            if (statusCode < 200 || 300 <= statusCode) {\n                reject(Object.assign(new ProviderError(\"Error response received from instance metadata service\"), { statusCode }));\n                req.destroy();\n            }\n            const chunks = [];\n            res.on(\"data\", (chunk) => {\n                chunks.push(chunk);\n            });\n            res.on(\"end\", () => {\n                resolve(Buffer.concat(chunks));\n                req.destroy();\n            });\n        });\n        req.end();\n    });\n}\n","export const isImdsCredentials = (arg) => Boolean(arg) &&\n    typeof arg === \"object\" &&\n    typeof arg.AccessKeyId === \"string\" &&\n    typeof arg.SecretAccessKey === \"string\" &&\n    typeof arg.Token === \"string\" &&\n    typeof arg.Expiration === \"string\";\nexport const fromImdsCredentials = (creds) => ({\n    accessKeyId: creds.AccessKeyId,\n    secretAccessKey: creds.SecretAccessKey,\n    sessionToken: creds.Token,\n    expiration: new Date(creds.Expiration),\n    ...(creds.AccountId && { accountId: creds.AccountId }),\n});\n","export const DEFAULT_TIMEOUT = 1000;\nexport const DEFAULT_MAX_RETRIES = 0;\nexport const providerConfigFromInit = ({ maxRetries = DEFAULT_MAX_RETRIES, timeout = DEFAULT_TIMEOUT, }) => ({ maxRetries, timeout });\n","export const retry = (toRetry, maxRetries) => {\n    let promise = toRetry();\n    for (let i = 0; i < maxRetries; i++) {\n        promise = promise.catch(toRetry);\n    }\n    return promise;\n};\n","import { loadConfig } from \"@smithy/node-config-provider\";\nimport { CredentialsProviderError } from \"@smithy/property-provider\";\nimport { InstanceMetadataV1FallbackError } from \"./error/InstanceMetadataV1FallbackError\";\nimport { httpRequest } from \"./remoteProvider/httpRequest\";\nimport { fromImdsCredentials, isImdsCredentials } from \"./remoteProvider/ImdsCredentials\";\nimport { providerConfigFromInit } from \"./remoteProvider/RemoteProviderInit\";\nimport { retry } from \"./remoteProvider/retry\";\nimport { getInstanceMetadataEndpoint } from \"./utils/getInstanceMetadataEndpoint\";\nimport { staticStabilityProvider } from \"./utils/staticStabilityProvider\";\nconst IMDS_PATH = \"/latest/meta-data/iam/security-credentials/\";\nconst IMDS_TOKEN_PATH = \"/latest/api/token\";\nconst AWS_EC2_METADATA_V1_DISABLED = \"AWS_EC2_METADATA_V1_DISABLED\";\nconst PROFILE_AWS_EC2_METADATA_V1_DISABLED = \"ec2_metadata_v1_disabled\";\nconst X_AWS_EC2_METADATA_TOKEN = \"x-aws-ec2-metadata-token\";\nexport const fromInstanceMetadata = (init = {}) => staticStabilityProvider(getInstanceMetadataProvider(init), { logger: init.logger });\nconst getInstanceMetadataProvider = (init = {}) => {\n    let disableFetchToken = false;\n    const { logger, profile } = init;\n    const { timeout, maxRetries } = providerConfigFromInit(init);\n    const getCredentials = async (maxRetries, options) => {\n        const isImdsV1Fallback = disableFetchToken || options.headers?.[X_AWS_EC2_METADATA_TOKEN] == null;\n        if (isImdsV1Fallback) {\n            let fallbackBlockedFromProfile = false;\n            let fallbackBlockedFromProcessEnv = false;\n            const configValue = await loadConfig({\n                environmentVariableSelector: (env) => {\n                    const envValue = env[AWS_EC2_METADATA_V1_DISABLED];\n                    fallbackBlockedFromProcessEnv = !!envValue && envValue !== \"false\";\n                    if (envValue === undefined) {\n                        throw new CredentialsProviderError(`${AWS_EC2_METADATA_V1_DISABLED} not set in env, checking config file next.`, { logger: init.logger });\n                    }\n                    return fallbackBlockedFromProcessEnv;\n                },\n                configFileSelector: (profile) => {\n                    const profileValue = profile[PROFILE_AWS_EC2_METADATA_V1_DISABLED];\n                    fallbackBlockedFromProfile = !!profileValue && profileValue !== \"false\";\n                    return fallbackBlockedFromProfile;\n                },\n                default: false,\n            }, {\n                profile,\n            })();\n            if (init.ec2MetadataV1Disabled || configValue) {\n                const causes = [];\n                if (init.ec2MetadataV1Disabled)\n                    causes.push(\"credential provider initialization (runtime option ec2MetadataV1Disabled)\");\n                if (fallbackBlockedFromProfile)\n                    causes.push(`config file profile (${PROFILE_AWS_EC2_METADATA_V1_DISABLED})`);\n                if (fallbackBlockedFromProcessEnv)\n                    causes.push(`process environment variable (${AWS_EC2_METADATA_V1_DISABLED})`);\n                throw new InstanceMetadataV1FallbackError(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${causes.join(\", \")}].`);\n            }\n        }\n        const imdsProfile = (await retry(async () => {\n            let profile;\n            try {\n                profile = await getProfile(options);\n            }\n            catch (err) {\n                if (err.statusCode === 401) {\n                    disableFetchToken = false;\n                }\n                throw err;\n            }\n            return profile;\n        }, maxRetries)).trim();\n        return retry(async () => {\n            let creds;\n            try {\n                creds = await getCredentialsFromProfile(imdsProfile, options, init);\n            }\n            catch (err) {\n                if (err.statusCode === 401) {\n                    disableFetchToken = false;\n                }\n                throw err;\n            }\n            return creds;\n        }, maxRetries);\n    };\n    return async () => {\n        const endpoint = await getInstanceMetadataEndpoint();\n        if (disableFetchToken) {\n            logger?.debug(\"AWS SDK Instance Metadata\", \"using v1 fallback (no token fetch)\");\n            return getCredentials(maxRetries, { ...endpoint, timeout });\n        }\n        else {\n            let token;\n            try {\n                token = (await getMetadataToken({ ...endpoint, timeout })).toString();\n            }\n            catch (error) {\n                if (error?.statusCode === 400) {\n                    throw Object.assign(error, {\n                        message: \"EC2 Metadata token request returned error\",\n                    });\n                }\n                else if (error.message === \"TimeoutError\" || [403, 404, 405].includes(error.statusCode)) {\n                    disableFetchToken = true;\n                }\n                logger?.debug(\"AWS SDK Instance Metadata\", \"using v1 fallback (initial)\");\n                return getCredentials(maxRetries, { ...endpoint, timeout });\n            }\n            return getCredentials(maxRetries, {\n                ...endpoint,\n                headers: {\n                    [X_AWS_EC2_METADATA_TOKEN]: token,\n                },\n                timeout,\n            });\n        }\n    };\n};\nconst getMetadataToken = async (options) => httpRequest({\n    ...options,\n    path: IMDS_TOKEN_PATH,\n    method: \"PUT\",\n    headers: {\n        \"x-aws-ec2-metadata-token-ttl-seconds\": \"21600\",\n    },\n});\nconst getProfile = async (options) => (await httpRequest({ ...options, path: IMDS_PATH })).toString();\nconst getCredentialsFromProfile = async (profile, options, init) => {\n    const credentialsResponse = JSON.parse((await httpRequest({\n        ...options,\n        path: IMDS_PATH + profile,\n    })).toString());\n    if (!isImdsCredentials(credentialsResponse)) {\n        throw new CredentialsProviderError(\"Invalid response received from instance metadata service.\", {\n            logger: init.logger,\n        });\n    }\n    return fromImdsCredentials(credentialsResponse);\n};\n","import { CredentialsProviderError } from \"@smithy/property-provider\";\nexport class InstanceMetadataV1FallbackError extends CredentialsProviderError {\n    tryNextLink;\n    name = \"InstanceMetadataV1FallbackError\";\n    constructor(message, tryNextLink = true) {\n        super(message, tryNextLink);\n        this.tryNextLink = tryNextLink;\n        Object.setPrototypeOf(this, InstanceMetadataV1FallbackError.prototype);\n    }\n}\n","import { loadConfig } from \"@smithy/node-config-provider\";\nimport { parseUrl } from \"@smithy/url-parser\";\nimport { Endpoint as InstanceMetadataEndpoint } from \"../config/Endpoint\";\nimport { ENDPOINT_CONFIG_OPTIONS } from \"../config/EndpointConfigOptions\";\nimport { EndpointMode } from \"../config/EndpointMode\";\nimport { ENDPOINT_MODE_CONFIG_OPTIONS, } from \"../config/EndpointModeConfigOptions\";\nexport const getInstanceMetadataEndpoint = async () => parseUrl((await getFromEndpointConfig()) || (await getFromEndpointModeConfig()));\nconst getFromEndpointConfig = async () => loadConfig(ENDPOINT_CONFIG_OPTIONS)();\nconst getFromEndpointModeConfig = async () => {\n    const endpointMode = await loadConfig(ENDPOINT_MODE_CONFIG_OPTIONS)();\n    switch (endpointMode) {\n        case EndpointMode.IPv4:\n            return InstanceMetadataEndpoint.IPv4;\n        case EndpointMode.IPv6:\n            return InstanceMetadataEndpoint.IPv6;\n        default:\n            throw new Error(`Unsupported endpoint mode: ${endpointMode}.` + ` Select from ${Object.values(EndpointMode)}`);\n    }\n};\n","export var Endpoint;\n(function (Endpoint) {\n    Endpoint[\"IPv4\"] = \"http://169.254.169.254\";\n    Endpoint[\"IPv6\"] = \"http://[fd00:ec2::254]\";\n})(Endpoint || (Endpoint = {}));\n","export const ENV_ENDPOINT_NAME = \"AWS_EC2_METADATA_SERVICE_ENDPOINT\";\nexport const CONFIG_ENDPOINT_NAME = \"ec2_metadata_service_endpoint\";\nexport const ENDPOINT_CONFIG_OPTIONS = {\n    environmentVariableSelector: (env) => env[ENV_ENDPOINT_NAME],\n    configFileSelector: (profile) => profile[CONFIG_ENDPOINT_NAME],\n    default: undefined,\n};\n","export var EndpointMode;\n(function (EndpointMode) {\n    EndpointMode[\"IPv4\"] = \"IPv4\";\n    EndpointMode[\"IPv6\"] = \"IPv6\";\n})(EndpointMode || (EndpointMode = {}));\n","import { EndpointMode } from \"./EndpointMode\";\nexport const ENV_ENDPOINT_MODE_NAME = \"AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE\";\nexport const CONFIG_ENDPOINT_MODE_NAME = \"ec2_metadata_service_endpoint_mode\";\nexport const ENDPOINT_MODE_CONFIG_OPTIONS = {\n    environmentVariableSelector: (env) => env[ENV_ENDPOINT_MODE_NAME],\n    configFileSelector: (profile) => profile[CONFIG_ENDPOINT_MODE_NAME],\n    default: EndpointMode.IPv4,\n};\n","const STATIC_STABILITY_REFRESH_INTERVAL_SECONDS = 5 * 60;\nconst STATIC_STABILITY_REFRESH_INTERVAL_JITTER_WINDOW_SECONDS = 5 * 60;\nconst STATIC_STABILITY_DOC_URL = \"https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html\";\nexport const getExtendedInstanceMetadataCredentials = (credentials, logger) => {\n    const refreshInterval = STATIC_STABILITY_REFRESH_INTERVAL_SECONDS +\n        Math.floor(Math.random() * STATIC_STABILITY_REFRESH_INTERVAL_JITTER_WINDOW_SECONDS);\n    const newExpiration = new Date(Date.now() + refreshInterval * 1000);\n    logger.warn(\"Attempting credential expiration extension due to a credential service availability issue. A refresh of these \" +\n        `credentials will be attempted after ${new Date(newExpiration)}.\\nFor more information, please visit: ` +\n        STATIC_STABILITY_DOC_URL);\n    const originalExpiration = credentials.originalExpiration ?? credentials.expiration;\n    return {\n        ...credentials,\n        ...(originalExpiration ? { originalExpiration } : {}),\n        expiration: newExpiration,\n    };\n};\n","import { getExtendedInstanceMetadataCredentials } from \"./getExtendedInstanceMetadataCredentials\";\nexport const staticStabilityProvider = (provider, options = {}) => {\n    const logger = options?.logger || console;\n    let pastCredentials;\n    return async () => {\n        let credentials;\n        try {\n            credentials = await provider();\n            if (credentials.expiration && credentials.expiration.getTime() < Date.now()) {\n                credentials = getExtendedInstanceMetadataCredentials(credentials, logger);\n            }\n        }\n        catch (e) {\n            if (pastCredentials) {\n                logger.warn(\"Credential renew failed: \", e);\n                credentials = getExtendedInstanceMetadataCredentials(pastCredentials, logger);\n            }\n            else {\n                throw e;\n            }\n        }\n        pastCredentials = credentials;\n        return credentials;\n    };\n};\n"],"names":[],"mappings":"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","ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35]}