module.exports=[874,(e,t,r)=>{t.exports=e.x("buffer",()=>require("buffer"))},47797,34036,e=>{"use strict";let t=e=>"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e);e.s(["isArrayBuffer",0,t],34036);var r=e.i(874);e.s(["fromArrayBuffer",0,(e,i=0,s=e.byteLength-i)=>{if(!t(e))throw TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return r.Buffer.from(e,i,s)},"fromString",0,(e,t)=>{if("string"!=typeof e)throw TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?r.Buffer.from(e,t):r.Buffer.from(e)}],47797)},47068,e=>{"use strict";var t=e.i(47797);e.s(["toUtf8",0,e=>{if("string"==typeof e)return e;if("object"!=typeof e||"number"!=typeof e.byteOffset||"number"!=typeof e.byteLength)throw Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return(0,t.fromArrayBuffer)(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}])},42552,e=>{"use strict";var t=e.i(47797);e.s(["fromUtf8",0,e=>{let r=(0,t.fromString)(e,"utf8");return new Uint8Array(r.buffer,r.byteOffset,r.byteLength/Uint8Array.BYTES_PER_ELEMENT)}])},30360,e=>{"use strict";e.s([],34275),e.i(34275);var t=e.i(42552),r=e.i(47068);class i{marshaller;serializer;deserializer;serdeContext;defaultContentType;constructor({marshaller:e,serializer:t,deserializer:r,serdeContext:i,defaultContentType:s}){this.marshaller=e,this.serializer=t,this.deserializer=r,this.serdeContext=i,this.defaultContentType=s}async serializeEventStream({eventStream:e,requestSchema:t,initialRequest:r}){let i=this.marshaller,s=t.getEventStreamMember(),n=t.getMemberSchema(s),a=this.serializer,o=this.defaultContentType,f=Symbol("initialRequestMarker"),l={async *[Symbol.asyncIterator](){if(r){a.write(t,r);let e=a.flush();yield{[f]:!0,headers:{":event-type":{type:"string",value:"initial-request"},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:o}},body:e}}for await(let t of e)yield t}};return i.serialize(l,e=>{if(e[f])return{headers:e.headers,body:e.body};let t=Object.keys(e).find(e=>"__type"!==e)??"",{additionalHeaders:r,body:i,eventType:s,explicitPayloadContentType:a}=this.writeEventBody(t,n,e);return{headers:{":event-type":{type:"string",value:s},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:a??o},...r},body:i}})}async deserializeEventStream({response:e,responseSchema:t,initialResponseContainer:i}){let s=this.marshaller,n=t.getEventStreamMember(),a=t.getMemberSchema(n).getMemberSchemas(),o=Symbol("initialResponseMarker"),f=s.deserialize(e.body,async e=>{let i=Object.keys(e).find(e=>"__type"!==e)??"",s=e[i].body;if("initial-response"===i){let e=await this.deserializer.read(t,s);return delete e[n],{[o]:!0,...e}}if(!(i in a))return{$unknown:e};{let t=a[i];if(t.isStructSchema()){let n={},a=!1;for(let[o,f]of t.structIterator()){let{eventHeader:t,eventPayload:l}=f.getMergedTraits();if(a=a||!!(t||l),l)f.isBlobSchema()?n[o]=s:f.isStringSchema()?n[o]=(this.serdeContext?.utf8Encoder??r.toUtf8)(s):f.isStructSchema()&&(n[o]=await this.deserializer.read(f,s));else if(t){let t=e[i].headers[o]?.value;null!=t&&(f.isNumericSchema()?t&&"object"==typeof t&&"bytes"in t?n[o]=BigInt(t.toString()):n[o]=Number(t):n[o]=t)}}if(a)return{[i]:n};if(0===s.byteLength)return{[i]:{}}}return{[i]:await this.deserializer.read(t,s)}}}),l=f[Symbol.asyncIterator](),u=await l.next();if(u.done)return f;if(u.value?.[o]){if(!t)throw Error("@smithy::core/protocols - initial-response event encountered in event stream but no response schema given.");for(let[e,t]of Object.entries(u.value))i[e]=t}return{async *[Symbol.asyncIterator](){for(u?.value?.[o]||(yield u.value);;){let{done:e,value:t}=await l.next();if(e)break;yield t}}}}writeEventBody(e,r,i){let s,n=this.serializer,a=e,o=null,f=r.getSchema()[4].includes(e),l={};if(f){let t=r.getMemberSchema(e);if(t.isStructSchema()){for(let[r,s]of t.structIterator()){let{eventHeader:t,eventPayload:n}=s.getMergedTraits();if(n)o=r;else if(t){let t=i[e][r],n="binary";s.isNumericSchema()?n=-0x80000000<=t&&t<=0x80000000-1?"integer":"long":s.isTimestampSchema()?n="timestamp":s.isStringSchema()?n="string":s.isBooleanSchema()&&(n="boolean"),null!=t&&(l[r]={type:n,value:t},delete i[e][r])}}if(null!==o){let r=t.getMemberSchema(o);r.isBlobSchema()?s="application/octet-stream":r.isStringSchema()&&(s="text/plain"),n.write(r,i[e][o])}else n.write(t,i[e])}else throw Error("@smithy/core/event-streams - non-struct member not supported in event stream union.")}else{let[t,r]=i[e];a=t,n.write(15,r)}let u=n.flush();return{body:"string"==typeof u?(this.serdeContext?.utf8Decoder??t.fromUtf8)(u):u,eventType:a,explicitPayloadContentType:s,additionalHeaders:l}}}e.s(["EventStreamSerde",()=>i],51976),e.i(51976),e.s(["EventStreamSerde",()=>i],30360)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__9d57f5ea._.js.map